<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <link
      href="https://unpkg.com/tabulator-tables/dist/css/tabulator_semanticui.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/slim-select@latest/dist/slimselect.css"
      rel="stylesheet"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css"
      rel="stylesheet"
    />

    <!-- Load Font Awesome in your HTML -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />

    <!-- <link
                                  rel="stylesheet"
                                  href="https://cdnjs.cloudflare.com/ajax/libs/perfect-scrollbar/1.5.3/css/perfect-scrollbar.min.css" /> -->

    <title>CRM App</title>

    <style>
      /* * {
                              outline: 1px solid red;
                              user-select: none;
                            } */

      .highlight {
        outline: 3px solid #3b82f6 !important;
        outline-offset: -2px !important;
      }

      .select-arrow {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
        font-size: 12px;
        color: #666; /* Adjust color */
      }

      /* Dropdown container */
      .custom-dropdown {
        max-height: 0;
        height: 0;
        overflow: hidden;
        transition: height 0.2s ease-in-out, opacity 0.2s ease-in-out;
        opacity: 0;
        transform: scaleY(0);
        transform-origin: center top;
        overflow: hidden;
      }

      /* Class to be added when dropdown is open */
      .custom-dropdown.open {
        max-height: 200px; /* Adjust according to the dropdown content size */
        height: auto;
        overflow: auto;
        opacity: 1;
        transform: scaleY(1);
        transform-origin: center top;
        /* animation: dropdown-open 0.2s ease-in-out forwards; */
      }

      /* Optional for smoother transition */
      @keyframes dropdown-open {
        0% {
          max-height: 0;
          height: 0;
        }
        100% {
          max-height: 200px; /* Adjust as per content */
          height: 200px;
        }
      }

      input[type='number']::-webkit-inner-spin-button,
      input[type='number']::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      .feature-button {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 0.5em;
        width: 44px;
        height: 44px;
      }

      .icon {
        width: 20px;
        height: 20px;
      }

      .tabLink {
        display: flex;
      }

      .active {
        display: block;
      }

      .custom-shadow {
        box-shadow: rgba(0, 0, 0, 0.16) 0px 10px 36px 0px,
          rgba(0, 0, 0, 0.06) 0px 0px 0px 1px;
      }

      .dropdown-input {
        display: none;
        z-index: 10; /* z-10 */
        background-color: white; /* bg-white */
        border-bottom: 1px solid #f3f4f6; /* divide-y divide-gray-100 */
        border-top: 1px solid #f3f4f6; /* Add this if you want top border */
        border-radius: 0.5rem; /* rounded-lg */
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06); /* shadow */
        width: 11rem; /* w-44 (44 x 0.25rem = 11rem) */
        position: absolute;
        inset: 0px auto auto 0px;
        margin: 0px;
      }

      .dropdown-input.active {
        display: block;
        transform: translate3d(-0.72px, 49.98px, 0px);
      }

      #filter-sidebar {
        width: 0px;
        min-width: 0px;
        transition: all 0.3s ease;
        /* transform-origin: right; */
      }

      #filter-sidebar.active {
        min-width: 256px;
        width: 256px;
        /* transform: scaleX(1); */
        /* clip-path: inset(0 0 0 0); */
      }

      /* .dropdown-input.hidden {
                                  display: none; */
      /* transform: translate3d(4.28135px, 70.948px, 0px); */
      /* } */

      [role='tab'].active {
        background-color: #e5e7eb;
      }

      [role='tabpanel'] {
        display: none;
      }

      [role='tabpanel'].active {
        display: block;
      }

      .ss-main {
        min-height: 41.2px;
        height: 41.2px;
        background-color: white; /* bg-gray-50 */
        border: 1px solid #ccc; /* border border-[#ccc] */
        color: #111827; /* text-gray-900 */
        font-size: 0.875rem; /* text-sm */
        border-radius: 0.5rem; /* rounded-lg */
        width: 100%; /* block w-full */
        padding: 0.625rem; /* p-2.5 */
        transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* To animate focus effects */
      }

      .ss-main:focus {
        outline: 0px;
        outline-offset: 0px;
        box-shadow: none;
      }

      .classic-style-input {
        min-height: 10px !important;
        height: 30px !important;
        border: 0px;
        border-radius: 0px;
        padding: 0px;
        background-color: white;
        color: #111827;
        font-size: 12px;
        width: 100%;
        transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out; /* To animate focus effects */
      }
      /* Focus states */

      /* .ss-main:focus {
                            outline: none;
                            border-color: #3b82f6; /* focus:ring-2 */
      /* box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); focus:ring-blue-500 */
      /* }  */

      /* Scrollbar styling for WebKit browsers (Chrome, Edge, Safari) */
      ::-webkit-scrollbar {
        width: 16px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
        margin-block: 0.5em;
      }

      ::-webkit-scrollbar-thumb {
        background-color: #909090;
        border-radius: 100vw;
        border: 4px solid transparent;
        background-clip: content-box;
      }

      ::-webkit-scrollbar-thumb:hover {
        background-color: #606060;
      }

      ::-webkit-scrollbar-corner {
        background-color: transparent;
      }
    </style>
  </head>
  <body class="">
    <button
      data-drawer-target="separator-sidebar"
      data-drawer-toggle="separator-sidebar"
      aria-controls="separator-sidebar"
      type="button"
      class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200"
    >
      <span class="sr-only">Open sidebar</span>
      <svg
        class="w-6 h-6"
        aria-hidden="true"
        fill="currentColor"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          clip-rule="evenodd"
          fill-rule="evenodd"
          d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"
        ></path>
      </svg>
    </button>

    <div class="flex flex-row">
      <aside
        id="separator-sidebar"
        class="fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0"
        aria-label="Sidebar"
      >
        <div
          class="h-full px-3 py-4 overflow-y-auto bg-white border-r border-[#ccc]"
        >
          <ul class="space-y-2 font-medium">
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-200 cursor-pointer group"
                role="tab"
                aria-controls="dashboard-tab-content"
                id="dashboard-tab"
                aria-selected="false"
              >
                <svg
                  class="w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 22 21"
                >
                  <path
                    d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"
                  />
                  <path
                    d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"
                  />
                </svg>
                <span class="ms-3">Bản điều khiển</span>
              </div>
            </li>
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-200 cursor-pointer group"
                id="product-tab"
                role="tab"
                aria-controls="product-ta-content"
                aria-selected="false"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 0 0 4.25 22.5h15.5a1.875 1.875 0 0 0 1.865-2.071l-1.263-12a1.875 1.875 0 0 0-1.865-1.679H16.5V6a4.5 4.5 0 1 0-9 0ZM12 3a3 3 0 0 0-3 3v.75h6V6a3 3 0 0 0-3-3Zm-3 8.25a3 3 0 1 0 6 0v-.75a.75.75 0 0 1 1.5 0v.75a4.5 4.5 0 1 1-9 0v-.75a.75.75 0 0 1 1.5 0v.75Z"
                    clip-rule="evenodd"
                  />
                </svg>

                <span class="flex-1 ms-3 whitespace-nowrap">Sản phẩm</span>
              </div>
            </li>
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-200 cursor-pointer group"
                id="customer-tab"
                role="tab"
                aria-controls="customer-tab-content"
                aria-selected="false"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z"
                    clip-rule="evenodd"
                  />
                </svg>

                <span class="flex-1 ms-3 whitespace-nowrap">Khách hàng</span>
              </div>
            </li>
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-200 cursor-pointer group"
                id="order-tab"
                role="tab"
                aria-controls="order-tab-content"
                aria-selected="false"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10.5 3A1.501 1.501 0 0 0 9 4.5h6A1.5 1.5 0 0 0 13.5 3h-3Zm-2.693.178A3 3 0 0 1 10.5 1.5h3a3 3 0 0 1 2.694 1.678c.497.042.992.092 1.486.15 1.497.173 2.57 1.46 2.57 2.929V19.5a3 3 0 0 1-3 3H6.75a3 3 0 0 1-3-3V6.257c0-1.47 1.073-2.756 2.57-2.93.493-.057.989-.107 1.487-.15Z"
                    clip-rule="evenodd"
                  />
                </svg>

                <span class="flex-1 ms-3 whitespace-nowrap">Đơn hàng</span>
              </div>
            </li>
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-200 cursor-pointer group"
                id="inventory-tab"
                role="tab"
                aria-controls="inventory-tab-content"
                aria-selected="false"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M12.378 1.602a.75.75 0 0 0-.756 0L3 6.632l9 5.25 9-5.25-8.622-5.03ZM21.75 7.93l-9 5.25v9l8.628-5.032a.75.75 0 0 0 .372-.648V7.93ZM11.25 22.18v-9l-9-5.25v8.57a.75.75 0 0 0 .372.648l8.628 5.033Z"
                  />
                </svg>

                <span class="flex-1 ms-3 whitespace-nowrap">Kho hàng</span>
              </div>
            </li>
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-200 group"
                role="tab"
                aria-controls="Tab1"
                aria-selected="false"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 18 16"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"
                  />
                </svg>
                <span class="flex-1 ms-3 whitespace-nowrap">N/A</span>
              </div>
            </li>
            <li>
              <div
                class="flex items-center p-2 text-gray-900 rounded-lg hover:bg-gray-100 group"
                role="tab"
                aria-controls="Tab1"
                aria-selected="false"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.96 2.96 0 0 0 .13 5H5Z"
                  />
                  <path
                    d="M6.737 11.061a2.961 2.961 0 0 1 .81-1.515l6.117-6.116A4.839 4.839 0 0 1 16 2.141V2a1.97 1.97 0 0 0-1.933-2H7v5a2 2 0 0 1-2 2H0v11a1.969 1.969 0 0 0 1.933 2h12.134A1.97 1.97 0 0 0 16 18v-3.093l-1.546 1.546c-.413.413-.94.695-1.513.81l-3.4.679a2.947 2.947 0 0 1-1.85-.227 2.96 2.96 0 0 1-1.635-3.257l.681-3.397Z"
                  />
                  <path
                    d="M8.961 16a.93.93 0 0 0 .189-.019l3.4-.679a.961.961 0 0 0 .49-.263l6.118-6.117a2.884 2.884 0 0 0-4.079-4.078l-6.117 6.117a.96.96 0 0 0-.263.491l-.679 3.4A.961.961 0 0 0 8.961 16Zm7.477-9.8a.958.958 0 0 1 .68-.281.961.961 0 0 1 .682 1.644l-.315.315-1.36-1.36.313-.318Zm-5.911 5.911 4.236-4.236 1.359 1.359-4.236 4.237-1.7.339.341-1.699Z"
                  />
                </svg>
                <span class="flex-1 ms-3 whitespace-nowrap">N/A</span>
              </div>
            </li>
          </ul>
          <ul class="pt-4 mt-4 space-y-2 font-medium border-t border-[#ccc]">
            <li>
              <a
                class="flex items-center p-2 text-gray-900 transition duration-75 rounded-lg hover:bg-gray-100 group"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 17 20"
                >
                  <path
                    d="M7.958 19.393a7.7 7.7 0 0 1-6.715-3.439c-2.868-4.832 0-9.376.944-10.654l.091-.122a3.286 3.286 0 0 0 .765-3.288A1 1 0 0 1 4.6.8c.133.1.313.212.525.347A10.451 10.451 0 0 1 10.6 9.3c.5-1.06.772-2.213.8-3.385a1 1 0 0 1 1.592-.758c1.636 1.205 4.638 6.081 2.019 10.441a8.177 8.177 0 0 1-7.053 3.795Z"
                  />
                </svg>
                <span class="ms-3">Upgrade to Pro</span>
              </a>
            </li>
            <li>
              <a
                class="flex items-center p-2 text-gray-900 transition duration-75 rounded-lg hover:bg-gray-100 group"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 16 20"
                >
                  <path
                    d="M16 14V2a2 2 0 0 0-2-2H2a2 2 0 0 0-2 2v15a3 3 0 0 0 3 3h12a1 1 0 0 0 0-2h-1v-2a2 2 0 0 0 2-2ZM4 2h2v12H4V2Zm8 16H3a1 1 0 0 1 0-2h9v2Z"
                  />
                </svg>
                <span class="ms-3">Documentation</span>
              </a>
            </li>
            <li>
              <a
                class="flex items-center p-2 text-gray-900 transition duration-75 rounded-lg hover:bg-gray-100 group"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 20 18"
                >
                  <path
                    d="M18 0H6a2 2 0 0 0-2 2h14v12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Z"
                  />
                  <path
                    d="M14 4H2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM2 16v-6h12v6H2Z"
                  />
                </svg>
                <span class="ms-3">Components</span>
              </a>
            </li>
            <li>
              <a
                class="flex items-center p-2 text-gray-900 transition duration-75 rounded-lg hover:bg-gray-100 group"
              >
                <svg
                  class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 21 21"
                >
                  <path
                    d="m5.4 2.736 3.429 3.429A5.046 5.046 0 0 1 10.134 6c.356.01.71.06 1.056.147l3.41-3.412c.136-.133.287-.248.45-.344A9.889 9.889 0 0 0 10.269 1c-1.87-.041-3.713.44-5.322 1.392a2.3 2.3 0 0 1 .454.344Zm11.45 1.54-.126-.127a.5.5 0 0 0-.706 0l-2.932 2.932c.029.023.049.054.078.077.236.194.454.41.65.645.034.038.078.067.11.107l2.927-2.927a.5.5 0 0 0 0-.707Zm-2.931 9.81c-.024.03-.057.052-.081.082a4.963 4.963 0 0 1-.633.639c-.041.036-.072.083-.115.117l2.927 2.927a.5.5 0 0 0 .707 0l.127-.127a.5.5 0 0 0 0-.707l-2.932-2.931Zm-1.442-4.763a3.036 3.036 0 0 0-1.383-1.1l-.012-.007a2.955 2.955 0 0 0-1-.213H10a2.964 2.964 0 0 0-2.122.893c-.285.29-.509.634-.657 1.013l-.01.016a2.96 2.96 0 0 0-.21 1 2.99 2.99 0 0 0 .489 1.716c.009.014.022.026.032.04a3.04 3.04 0 0 0 1.384 1.1l.012.007c.318.129.657.2 1 .213.392.015.784-.05 1.15-.192.012-.005.02-.013.033-.018a3.011 3.011 0 0 0 1.676-1.7v-.007a2.89 2.89 0 0 0 0-2.207 2.868 2.868 0 0 0-.27-.515c-.007-.012-.02-.025-.03-.039Zm6.137-3.373a2.53 2.53 0 0 1-.35.447L14.84 9.823c.112.428.166.869.16 1.311-.01.356-.06.709-.147 1.054l3.413 3.412c.132.134.249.283.347.444A9.88 9.88 0 0 0 20 11.269a9.912 9.912 0 0 0-1.386-5.319ZM14.6 19.264l-3.421-3.421c-.385.1-.781.152-1.18.157h-.134c-.356-.01-.71-.06-1.056-.147l-3.41 3.412a2.503 2.503 0 0 1-.443.347A9.884 9.884 0 0 0 9.732 21H10a9.9 9.9 0 0 0 5.044-1.388 2.519 2.519 0 0 1-.444-.348ZM1.735 15.6l3.426-3.426a4.608 4.608 0 0 1-.013-2.367L1.735 6.4a2.507 2.507 0 0 1-.35-.447 9.889 9.889 0 0 0 0 10.1c.1-.164.217-.316.35-.453Zm5.101-.758a4.957 4.957 0 0 1-.651-.645c-.033-.038-.077-.067-.11-.107L3.15 17.017a.5.5 0 0 0 0 .707l.127.127a.5.5 0 0 0 .706 0l2.932-2.933c-.03-.018-.05-.053-.078-.076ZM6.08 7.914c.03-.037.07-.063.1-.1.183-.22.384-.423.6-.609.047-.04.082-.092.129-.13L3.983 4.149a.5.5 0 0 0-.707 0l-.127.127a.5.5 0 0 0 0 .707L6.08 7.914Z"
                  />
                </svg>
                <span class="ms-3">Help</span>
              </a>
            </li>
          </ul>
        </div>
      </aside>

      <!-- Dashboard -->
      <div
        class="p-4 sm:ml-64 h-screen bg-gray-200 overflow-auto"
        id="dashboard-tab-content"
        role="tabpanel"
      >
        <div class="p-5 bg-white rounded-lg">This is dashboard tab</div>
      </div>

      <!-- Khách Hàng -->
      <div
        class="p-4 sm:ml-64 h-screen bg-gray-200 overflow-auto w-full"
        id="customer-tab-content"
        role="tabpanel"
      >
        <div class="p-5 bg-white rounded-lg">
          <!-- // Feature BUTTONS -->
          <div class="flex flex-col mb-4">
            <h1 class="mr-auto text-3xl font-bold mb-6">Khách Hàng</h1>
            <div class="flex flex-row justify-between">
              <div class="flex flex-row gap-1">
                <button
                  id="customer-filter-button"
                  class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"
                      />
                    </svg>
                  </div>
                </button>

                <form class="max-w-lg mx-auto max-h-[44px] h-[44px]">
                  <div class="relative h-full">
                    <div
                      class="absolute inset-y-0 end-0 flex items-center pe-3 pointer-events-none"
                    >
                      <svg
                        class="w-4 h-4 text-gray-500 dark:text-gray-400"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 20 20"
                      >
                        <path
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                        />
                      </svg>
                    </div>
                    <input
                      type="search"
                      id="customer-search-field"
                      class="block h-full w-full p-4 pe-10 text-sm text-gray-900 border border-[#ccc] rounded-lg bg-gray-50 focus:ring-blue-500 focus:ring-2"
                      placeholder="Tìm kiếm"
                    />
                  </div>
                </form>
              </div>
              <div class="flex flex-row gap-1">
                <button
                  class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
                      />
                    </svg>
                  </div>
                  <!-- <span class="">Download</span> -->
                </button>
                <button
                  disabled
                  id="customer-edit-button"
                  class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 disabled:text-gray-400"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"
                      />
                    </svg>
                  </div>
                  <!-- <span class="">Sửa</span> -->
                </button>

                <button
                  data-modal-target="modal"
                  data-modal-toggle="modal"
                  class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5"
                  type="button"
                  id="customer-add-button"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 4.5v15m7.5-7.5h-15"
                      />
                    </svg>
                  </div>
                  <!-- <span class="">Thêm</span> -->
                </button>
              </div>
            </div>
          </div>
          <!-- // Table -->

          <div id="customer-table"></div>
        </div>
      </div>

      <!-- Sản Phẩm -->
      <div
        class="p-4 sm:ml-64 h-screen bg-gray-200 overflow-auto w-full"
        id="product-tab-content"
        role="tabpanel"
      >
        <div class="p-5 bg-white rounded-lg">
          <!-- // Feature BUTTONS -->

          <div class="mb-4">
            <h1 class="mr-auto text-3xl font-bold mb-6">Sản Phẩm</h1>
            <div class="flex flex-row justify-between">
              <div class="flex flex-row gap-1">
                <button
                  id="product-filter-button"
                  class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"
                      />
                    </svg>
                  </div>
                </button>
                <form class="max-w-lg mx-auto max-h-[44px] h-[44px]">
                  <div class="relative h-full">
                    <div
                      class="absolute inset-y-0 end-0 flex items-center pe-3 pointer-events-none"
                    >
                      <svg
                        class="w-4 h-4 text-gray-500 dark:text-gray-400"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 20 20"
                      >
                        <path
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                        />
                      </svg>
                    </div>
                    <input
                      type="search"
                      id="product-search-field"
                      class="block h-full w-full p-4 pe-10 text-sm text-gray-900 border border-[#ccc] rounded-lg bg-gray-50 focus:ring-blue-500 focus:ring-2"
                      placeholder="Tìm kiếm"
                    />
                  </div>
                </form>
              </div>
              <div class="flex flex-row gap-1">
                <button
                  data-modal-target="modal"
                  data-modal-toggle="modal"
                  class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5"
                  type="button"
                  id="product-add-button"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 4.5v15m7.5-7.5h-15"
                      />
                    </svg>
                  </div>
                  <!-- <span class="">Thêm</span> -->
                </button>

                <button
                  disabled
                  id="product-edit-button"
                  class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 disabled:text-gray-400"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"
                      />
                    </svg>
                  </div>
                  <!-- <span class="">Sửa</span> -->
                </button>

                <button
                  class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
                >
                  <div class="icon">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 25 25"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
                      />
                    </svg>
                  </div>
                  <!-- <span class="">Download</span> -->
                </button>
              </div>
            </div>
          </div>
          <!-- // Table -->
          <div id="product-table"></div>
        </div>
      </div>

      <!-- Đơn Hàng -->
      <div
        class="p-4 sm:ml-64 h-screen bg-gray-200 overflow-auto w-full"
        id="order-tab-content"
        role="tabpanel"
      >
        <div class="p-5 bg-white rounded-lg">
          <!-- // Feature BUTTONS -->
          <div class="flex flex-row-reverse mb-4">
            <button
              data-modal-target="modal"
              data-modal-toggle="modal"
              class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5"
              type="button"
              id="order-add-button"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 4.5v15m7.5-7.5h-15"
                  />
                </svg>
              </div>
              <!-- <span class="">Thêm</span> -->
            </button>
            <button
              id="order-filter-button"
              class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"
                  />
                </svg>
              </div>
            </button>
            <button
              disabled
              id="order-edit-button"
              class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 disabled:text-gray-400"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"
                  />
                </svg>
              </div>
              <!-- <span class="">Sửa</span> -->
            </button>
            <button
              class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
                  />
                </svg>
              </div>
              <!-- <span class="">Download</span> -->
            </button>
            <h1 class="mr-auto text-3xl font-bold">Đơn Hàng</h1>
          </div>

          <!-- // Table -->
          <div id="order-table"></div>
        </div>
      </div>

      <!-- Kho Hàng -->
      <div
        class="p-4 sm:ml-64 h-screen bg-gray-200 overflow-auto w-full"
        id="inventory-tab-content"
        role="tabpanel"
      >
        <div class="p-5 bg-white rounded-lg">
          <!-- // Feature BUTTONS -->
          <div class="flex flex-row-reverse mb-4 gap-1">
            <button
              class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5"
              type="button"
              id="inventory-add-button"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 4.5v15m7.5-7.5h-15"
                  />
                </svg>
              </div>
              <!-- <span class="">Thêm</span> -->
            </button>
            <button
              id="inventory-filter-button"
              type="button"
              class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"
                  />
                </svg>
              </div>
              <!-- <span class="">Lọc</span> -->
            </button>
            <button
              disabled
              id="inventory-edit-button"
              class="feature-button text-gray-500 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 disabled:text-gray-400"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"
                  />
                </svg>
              </div>
              <!-- <span class="">Sửa</span> -->
            </button>
            <button
              class="feature-button text-gray-500 disable:text-gray-400 bg-white focus:outline-none hover:bg-gray-100 font-medium rounded-lg text-sm px-3 py-1.5 m"
            >
              <div class="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 25 25"
                  stroke-width="1.5"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"
                  />
                </svg>
              </div>
              <!-- <span class="">Download</span> -->
            </button>
            <!-- <button
                                                      class="feature-button text-gray-500 bg-white   focus:outline-none hover:bg-gray-100    font-medium rounded-lg text-sm px-3 py-1.5 m">
                                                      <div class="icon">
                                                        <svg
                                                          xmlns="http://www.w3.org/2000/svg"
                                                          fill="none"
                                                          viewBox="0 0 25 25"
                                                          stroke-width="1.5"
                                                          stroke="currentColor">
                                                          <path
                                                            stroke-linecap="round"
                                                            stroke-linejoin="round"
                                                            d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3" />
                                                        </svg>
                                                      </div>
                                                      <span class="">Redo</span>
                                                    </button>
                                                    <button
                                                      class="feature-button text-gray-500 bg-white   focus:outline-none hover:bg-gray-100    font-medium rounded-lg text-sm px-3 py-1.5 m">
                                                        <div class="icon">
                                                          <svg
                                                            xmlns="http://www.w3.org/2000/svg"
                                                            fill="none"
                                                            viewBox="0 0 25 25"
                                                            stroke-width="1.5"
                                                            stroke="currentColor">
                                                            <path
                                                              stroke-linecap="round"
                                                              stroke-linejoin="round"
                                                              d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3" />
                                                          </svg>
                                                        </div>
                                                      <span class="">Undo</span>
                                                    </button> -->

            <h1 class="mr-auto text-3xl font-bold">Kho Hàng</h1>
          </div>

          <!-- <div id="inventory-filter-accordion" class="accordion">
                                      <div
                                        id="inventory-filter-accordion-content"
                                        class="accordion-content flex flex-row gap-4 flex-wrap items-start"></div>
                                    </div> -->
          <!-- // Table -->
          <div id="inventory-table"></div>
        </div>
      </div>

      <!-- Filter Sidebar -->
      <div
        class="filter-sidebar h-screen overflow-y-auto flex flex-col bg-blue-100"
        id="filter-sidebar"
      >
        <div
          class="flex p-5 items-center justify-between border-b border-[#ccc]"
        >
          <div>Bộ Lọc</div>
          <button id="clear-filter-button" type="button">Xóa</button>
        </div>
        <form class="p-5" id="filter-sidebar-content"></form>
      </div>
    </div>

    <!-- Modal -->
    <div
      id="modal"
      class="hidden fixed top-0 left-0 right-0 z-50 p-4 h-screen w-screen"
    >
      <div
        class="relative p-4 w-full max-w-4xl max-h-full z-[70] mr-auto ml-auto top-1/2 -translate-y-1/2"
      >
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow">
          <!-- Modal header -->
          <div id="modal-header"></div>
          <!-- Modal body -->
          <div id="modal-body" class="p-3 p-y-1 space-y-4"></div>
          <!-- Modal footer -->
          <div id="modal-footer"></div>
        </div>
      </div>
      <div
        id="modal-overlay"
        class="z-60 h-screen bg-black opacity-20 absolute overflow-y-auto overflow-x-hidden top-0 right-0 left-0 z-50 md:inset-0 h-[calc(100%-1rem)]"
      ></div>
    </div>

    <script
      type="text/javascript"
      src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"
    ></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/luxon/1.27.0/luxon.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/flowbite@2.4.1/dist/flowbite.min.js"></script> -->

    <script src="https://unpkg.com/cleave-zen@0.0.17/dist/cleave-zen.umd.js"></script>
    <script src="https://unpkg.com/slim-select@latest/dist/slimselect.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>

    <!-- <script>
      const LABELS = {
        CANCEL: "Huỷ",
        PAY_NOW: "Trả ngay",
        GOODS: "Mặt hàng",
        EDITING: "editing",
        NAVIGATING: "navigating",
        PAYMENT: "Thanh toán",
        CUSTOMER_INFO: "Thông tin khách hàng",
        ORDER_INFO: "Thông tin đơn hàng",
        DATABASE: "Dữ liệu",
        STT: "STT",
        ID: "Mã",
        ORDER_ID: "Mã đơn hàng",
        CUSTOMER_ID: "Mã khách hàng",
        IMAGE: "Hình ảnh",
        NAME: "Tên",
        CUSTOMER: "Khách hàng",
        PRODUCT: "Sản phẩm",
        ORDER: "Đơn hàng",
        ORDER_DETAIL: "Chi tiết",
        ORDER_SUMMARY: "Tóm tắt",
        INVENTORY: "Kho",
        PRODUCTION: "Sản xuất",
        NOTE: "Ghi chú",
        FINISHED_PRODUCT: "Thành phẩm",
        STATUS: "Trạng thái",
        DATE: "Ngày",
        UNIT_COST: "Đơn giá",
        UNIT: "Đơn vị",
        DEBT: "Nợ",
        TOTAL_AMOUNT: "Thành tiền",
        QUANTITY: "Số lượng",
        TAX: "Thuế",
        COLLECT: "Thu",
        ADDRESS: "Địa chỉ",
        DELIVERED: "Đã giao",
        PHONE_NUMBER: "Sdt",
        TYPE: "Loại",
        DASHBOARD: "Bảng điều kiển",
        ADD: "Thêm",
        EDIT: "Sửa",
        FILTER: "Lọc",
        PRINT: "In",
        ORDER_NUMBER: "Mã đơn hàng",
        SUMMARY_INFO: "Tóm tắt",
        DETAIL_INFO: "Tóm tắt",
        DESCRIPTION: "Miêu tả",
        SHIPPING_DATE: "Ngày giao",
        RECEIVING_DATE: "Ngày nhận",
        DOWNPAYMENT: "Cọc",
        COD: "Tiền mặt", // Cash on delivery
        AP: "Công nợ", // Account payable
        IN_PROCESS: "Đang xử lý",
        DONE: "Hoàn thành",
        WAITING_TO_SHIP: "Chờ giao hàng",
        SHIPPING: "Đang giao hàng",
        RECEIVE: "Đã nhận đơn",
      };

      const ELEMENT_IDS = {
        TABS: {
          [LABELS.DASHBOARD]: {
            ELEMENT: document.getElementById("dashboard-tab"),
            NAME: "dashboard",
            ID: "dashboard-tab",
            CONTENT: {},
          },
          [LABELS.PRODUCT]: {
            ELEMENT: document.getElementById("product-tab"),
            NAME: LABELS.PRODUCT,
            ID: "product-tab",
            CONTENT: {
              ELEMENT: document.getElementById("product-tab-content"),
              ID: "product-tab-content",
              TABLE: {
                ELEMENT: document.getElementById("product-table"),
                NAME: LABELS.PRODUCT,
                ID: "product-table",

                BUTTONS: {
                  EDIT: {
                    ELEMENT: document.getElementById("product-edit-button"),
                    ID: "product-edit-button",
                  },
                  PRINT: {
                    ELEMENT: document.getElementById("product-print-button"),
                    ID: "product-print-button",
                  },
                  FILTER: {
                    ELEMENT: document.getElementById("product-filter-button"),
                    ID: "product-filter-button",
                  },
                  ADD: {
                    ELEMENT: document.getElementById("product-add-button"),
                    ID: "product-add-button",
                  },
                },
              },
              SIDE_BAR: {
                FILTER: {
                  ELEMENT: document.getElementById("filter-sidebar"),
                  ID: "filter-sidebar",
                  CONTENT: {
                    ELEMENT: document.getElementById("filter-sidebar-content"),
                    ID: "filter-sidebar-content",
                    FIELDS: {},
                  },
                },
              },
            },
          },
          [LABELS.CUSTOMER]: {
            ELEMENT: document.getElementById("customer-tab"),
            NAME: LABELS.CUSTOMER,
            ID: "customer-tab",
            CONTENT: {
              ELEMENT: document.getElementById("customer-tab-content"),
              ID: "customer-tab-content",
              TABLE: {
                ELEMENT: document.getElementById("customer-table"),
                NAME: LABELS.CUSTOMER,
                ID: "customer-table",

                BUTTONS: {
                  EDIT: {
                    ELEMENT: document.getElementById("customer-edit-button"),
                    ID: "customer-edit-button",
                  },
                  PRINT: {
                    ELEMENT: document.getElementById("customer-print-button"),
                    ID: "customer-print-button",
                  },
                  FILTER: {
                    ELEMENT: document.getElementById("customer-filter-button"),
                    ID: "customer-filter-button",
                  },
                  ADD: {
                    ELEMENT: document.getElementById("customer-add-button"),
                    ID: "customer-add-button",
                  },
                },
              },

              SIDE_BAR: {
                FILTER: {
                  ELEMENT: document.getElementById("filter-sidebar"),
                  ID: "filter-sidebar",
                  CONTENT: {
                    ELEMENT: document.getElementById("filter-sidebar-content"),
                    ID: "filter-sidebar-content",
                    FIELDS: {},
                  },
                },
              },
            },
          },
          [LABELS.ORDER_SUMMARY]: {
            ELEMENT: document.getElementById("order-tab"),
            NAME: LABELS.ORDER_SUMMARY,
            ID: "order-tab",
            CONTENT: {
              ELEMENT: document.getElementById("order-tab-content"),
              ID: "order-tab-content",
              TABLE: {
                ELEMENT: document.getElementById("order-table"),
                NAME: LABELS.ORDER_SUMMARY,
                ID: "order-table",

                BUTTONS: {
                  EDIT: {
                    ELEMENT: document.getElementById("order-edit-button"),
                    ID: "order-edit-button",
                  },
                  PRINT: {
                    ELEMENT: document.getElementById("order-print-button"),
                    ID: "order-print-button",
                  },
                  FILTER: {
                    ELEMENT: document.getElementById("order-filter-button"),
                    ID: "order-filter-button",
                  },
                  ADD: {
                    ELEMENT: document.getElementById("order-add-button"),
                    ID: "order-add-button",
                  },
                },
              },
              SIDE_BAR: {
                FILTER: {
                  ELEMENT: document.getElementById("filter-sidebar"),
                  ID: "filter-sidebar",
                  CONTENT: {
                    ELEMENT: document.getElementById("filter-sidebar-content"),
                    ID: "filter-sidebar-content",
                    FIELDS: {},
                  },
                },
              },
            },
          },
          [LABELS.PRODUCTION]: {
            ELEMENT: document.getElementById("inventory-tab"),
            NAME: LABELS.PRODUCTION,
            ID: "inventory-tab",
            CONTENT: {
              ELEMENT: document.getElementById("inventory-tab-content"),
              ID: "inventory-tab-content",
              TABLE: {
                ELEMENT: document.getElementById("inventory-table"),
                NAME: LABELS.PRODUCTION,
                ID: "inventory-table",

                BUTTONS: {
                  EDIT: {
                    ELEMENT: document.getElementById("inventory-edit-button"),
                    ID: "inventory-edit-button",
                  },
                  PRINT: {
                    ELEMENT: document.getElementById("inventory-print-button"),
                    ID: "inventory-print-button",
                  },
                  FILTER: {
                    ELEMENT: document.getElementById("inventory-filter-button"),
                    ID: "inventory-filter-button",
                  },
                  ADD: {
                    ELEMENT: document.getElementById("inventory-add-button"),
                    ID: "inventory-add-button",
                  },
                },
              },
              SIDE_BAR: {
                FILTER: {
                  ELEMENT: document.getElementById("filter-sidebar"),
                  ID: "filter-sidebar",
                  CONTENT: {
                    ELEMENT: document.getElementById("filter-sidebar-content"),
                    ID: "filter-sidebar-content",
                    FIELDS: {},
                  },
                },
              },
            },
          },
        },
        MODAL: {
          CONTAINER: document.getElementById("modal"),
          ID: "modal",
          HEADER_ID: "modal-header",
          BODY_ID: "modal-body",
          FOOTER_ID: "modal-footer",
          CONTENT: {},
          BUTTONS: {
            CLOSE: {
              ELEMENT: document.getElementById("close-modal-button"),
              ID: "close-modal-button",
            },
            POST: {
              ELEMENT: document.getElementById("post-modal-button"),
              ID: "post-modal-button",
            },
            CANCEL: {
              ELEMENT: document.getElementById("cancel-modal-button"),
              ID: "cancel-modal-button",
            },
          },
          OVERLAY: { ID: "modal-overlay" },
          saveId: (key, value) => {
            if (!ELEMENT_IDS.MODAL.CONTENT[key]) {
              ELEMENT_IDS.MODAL.CONTENT[key] = {};
            }

            if (typeof value === "object") {
              const newItems = Object.keys(value);
              let newData = ELEMENT_IDS.MODAL.CONTENT[key];

              for (const item of newItems) {
                if (Array.isArray(newData[item])) {
                  newData[item].push(value[item]);
                } else {
                  newData[item] = value[item]; // convert to array
                }
              }

              ELEMENT_IDS.MODAL.CONTENT[key] = newData;
            } else {
              ELEMENT_IDS.MODAL.CONTENT[key] = value;
            }

            console.log(ELEMENT_IDS.MODAL.CONTENT);
          },

          getId: (key) => {
            if (ELEMENT_IDS.MODAL.CONTENT[key]) {
              return ELEMENT_IDS.MODAL.CONTENT[key];
            } else {
              return null;
            }
          },
        },
        SIDE_BAR: {
          FILTER: {
            ELEMENT: document.getElementById("filter-sidebar"),
            ID: "filter-sidebar",
            CONTENT: {
              ELEMENT: document.getElementById("filter-sidebar-content"),
              ID: "filter-sidebar-content",
              FIELDS: {},
            },
          },
        },
      };

      const MODAL_TYPE = {
        ERROR: "error",
        ADD_FORM: "add_form",
        EDIT_FORM: "edit_form",
        LOADING: "loading",
      };

      const STATE = {
        ELEMENT: {
          ACTIVE: "active",
          HIDDEN: "hidden",
        },
        ACTION: {
          OPEN: "open",
          CLOSE: "close",
        },
        ERROR: {
          TYPE: {
            UNDEFINED: "undefined",
            NULL: "null",
            MISMATCH: "type_mismatch",
          },
          VALUE: {
            EMPTY: "empty_value",
            INVALID: "invalid_value",
          },
          ELEMENT: {
            NOT_FOUND: "element_not_found",
          },
          GENERAL: {
            UNKNOWN: "unknown_error",
          },
        },
      };

      const DEFAULT_CONFIG = {
        TABLE: {
          COLUMN: {
            SETTING: {
              headerSort: true,
              headerHozAlign: "center",
              resizable: "header",
              width: 100,
            },

            DATA: {
              [LABELS.PRODUCT]: [
                { title: LABELS.ID, field: LABELS.ID, sorter: "string" },
                {
                  title: LABELS.IMAGE,
                  field: LABELS.IMAGE,
                  formatter: "image",
                },
                { title: LABELS.NAME, field: LABELS.NAME, sorter: "string" },
                { title: LABELS.NOTE, field: LABELS.NOTE, sorter: "string" },
              ],
              [LABELS.CUSTOMER]: [
                { title: "STT", field: "STT", sorter: "number" },
                { title: LABELS.ID, field: LABELS.ID, sorter: "string" },
                { title: LABELS.TYPE, field: LABELS.TYPE, sorter: "string" },
                { title: LABELS.NAME, field: LABELS.NAME, sorter: "string" },
                {
                  title: LABELS.PHONE_NUMBER,
                  field: LABELS.PHONE_NUMBER,
                  sorter: "number",
                },
                {
                  title: LABELS.ADDRESS,
                  field: LABELS.ADDRESS,
                  sorter: "string",
                },
                { title: LABELS.NOTE, field: LABELS.NOTE, sorter: "string" },
              ],
              [LABELS.ORDER_SUMMARY]: [
                {
                  title: "STT",
                  field: "id",
                  sorter: "number",
                  maxWidth: 75,
                },
                {
                  title: LABELS.DATE,
                  field: LABELS.DATE,
                  sorter: "date",
                  sorterParams: {
                    format: "dd-MM-yyyy",
                    alignEmptyValues: "top",
                  },
                },
                {
                  title: LABELS.ORDER_ID,
                  field: LABELS.ORDER_ID,
                  sorter: "string",
                },

                { title: "Khách", field: "Khách", sorter: "string" },
                {
                  title: LABELS.DOWNPAYMENT,
                  field: LABELS.DOWNPAYMENT,
                  sorter: "number",
                },
                {
                  title: LABELS.COLLECT,
                  field: LABELS.COLLECT,
                  sorter: "number",
                },
                {
                  title: LABELS.DEBT,
                  field: LABELS.DEBT,
                  sorter: "number",
                },
                {
                  title: LABELS.STATUS,
                  field: LABELS.STATUS,
                  sorter: "string",
                },
                { title: LABELS.DESCRIPTION, field: LABELS.DESCRIPTION },
              ],
              [LABELS.PRODUCTION]: [
                { title: LABELS.ID, field: LABELS.ID, sorter: "string" },
                {
                  title: LABELS.IMAGE,
                  field: LABELS.IMAGE,
                  sorter: "string",
                },
                { title: LABELS.NAME, field: LABELS.NAME, sorter: "string" },
                {
                  title: LABELS.PRODUCT,
                  field: LABELS.PRODUCT,
                  sorter: "number",
                },
                {
                  title: LABELS.FINISHED_PRODUCT,
                  field: LABELS.FINISHED_PRODUCT,
                  sorter: "number",
                },
                {
                  title: LABELS.DELIVERED,
                  field: LABELS.DELIVERED,
                  sorter: "number",
                },
                {
                  title: LABELS.STATUS,
                  field: LABELS.STATUS,
                  sorter: "string",
                },
                { title: LABELS.NOTE, field: LABELS.NOTE, sorter: "string" },
              ],
            },
          },
        },

        UNIT_OPTIONS: ["Cái", "Bao", "Thùng"],

        TYPE_OPTIONS: ["Xi", "Kẽm", "Xi gia công", "Bao bì", "Khuôn bế"],

        // STATUS_OPTIONS: {
        //   [LABELS.PRODUCT]: ["Available", "Discontinued", "Backordered"],
        //   [LABELS.CUSTOMER]: ["Active", "Inactive", "Pending"],
        //   [LABELS.ORDER_SUMMARY]: [
        //     "Processing",
        //     "Shipped",
        //     "Delivered",
        //     "Cancelled",
        //   ],
        //   [LABELS.PRODUCTION]: [
        //     "Còn hàng",
        //     "Sắp hết hàng",
        //     "Hết hàng",
        //     "Ngưng sản xuất",
        //   ],
        // },

        PAYMENT_OPTIONS: [LABELS.PAY_NOW, LABELS.AP],

        STATUS_OPTIONS: [
          LABELS.RECEIVE,
          LABELS.IN_PROCESS,
          LABELS.WAITING_TO_SHIP,
          LABELS.SHIPPING,
          LABELS.DONE,
        ],

        INITIAL_OPERATOR: ">=",

        COMPARISON_OPERATORS: ["<", ">", ">=", "<=", "="],

        // ROW_NUMBER: 4,

        SPREADSHEET: {
          ROW_NUMBER: 4,
          CELL_STYLE: [
            "min-w-[150px]",
            "h-[30px]",
            "border-0",
            "bg-white",
            "text-xs",
          ],
          FIELDS: [
            LABELS.PRODUCT,
            LABELS.QUANTITY,
            LABELS.UNIT,
            LABELS.UNIT_COST,
            LABELS.TAX,
            LABELS.TOTAL_AMOUNT,
            LABELS.NOTE,
          ],
        },

        SLIM_SELECT: {
          STYLE: {
            MODERN: [
              "h-[30px]",
              "min-h-[30px]",
              "text-xs",
              "!p-2.5",
              "!m-0",
              "items-center",
              "border",
            ],
            CLASSIC: [
              "h-[30px]",
              "min-h-[30px]",
              "text-xs",
              "classic-style-input",
            ],
          },
        },

        ACTIONS: {
          ORDER: {
            action1: {
              afterChange: (options) => {
                const customer = options[0].value;
                const customerInfo = STORAGE.getCustomerInfoByName(customer);
                const address = customerInfo[0][LABELS.ADDRESS];
                const phoneNumber = customerInfo[0][LABELS.PHONE_NUMBER];

                const addressFieldId =
                  ELEMENT_IDS.MODAL.CONTENT[LABELS.ADDRESS];
                const sdtFieldId =
                  ELEMENT_IDS.MODAL.CONTENT[LABELS.PHONE_NUMBER];

                UI_COMPONENTS.setValueToFieldById(addressFieldId, address);
                UI_COMPONENTS.setValueToFieldById(sdtFieldId, phoneNumber);

                STORAGE.setNewItemCustomerInfo({
                  [LABELS.CUSTOMER]: customer,
                  [LABELS.ADDRESS]: address,
                  [LABELS.PHONE_NUMBER]: phoneNumber,
                });
              },
            },
            action2: {
              afterChange: (options) => {
                let selectedValues = [];
                let id;
                options.forEach((option) => {
                  id = option.id;
                  const element = document.getElementById(id);
                  selectedValues.push(option.value);
                });
                // action(field, selectedValues, element.id);
                // STORAGE.setNewOrderData(LABELS.ORDER_DETAIL, {
                //   [LABELS.DATABASE]: selectedValues,
                // });
                const element = document.getElementById(id);
                const cell = element.closest("td");
                const rowIndex = cell.getAttribute("data-row-index");
                const colIndex = cell.getAttribute("data-col-index");
                const list = STORAGE.getNewItemOrderInfo();
                const fields = DEFAULT_CONFIG.SPREADSHEET.FIELDS;
                const key = fields[colIndex];
                let newData = {};

                console.log("list: ", list);

                // Check if the row exists, otherwise initialize it as an empty object
                const itemDetails = list[rowIndex] || {}; // Fallback to an empty object if row doesn't exist

                // Merge new key-value pair into the existing item details
                newData = { ...itemDetails, [key]: selectedValues[0] };

                // Update the list with the new/updated data
                list[rowIndex] = newData;

                STORAGE.setNewItemOrderInfo(list);
              },
            },
          },
        },

        STYLE: {
          OUTLINE: ["ring-2", "ring-blue-500"],
          FOCUS: ["focus:ring-2", "focus:ring-blue-500"],
          HIGHLIGHT: ["border-2", "border-solid", "border-blue-500"],
          NORMAL_INPUT_FIELD:
            "block p-2.5 w-full h-full z-20 text-sm text-gray-900 bg-gray-50 rounded border border-[#ccc] focus:ring-blue-500 focus:ring-2 outline-none",
          BUTTON: `text-gray-900 bg-white border border-[#ccc] focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2`,
        },
      };

      class CustomSelect {
        // Constructor method to initialize object properties
        constructor(element, settings = {}) {
          this.displayBox = element;
          this.settings = settings;
          this.startedIndex = -1;

          this.defaultSettings = {
            data: ["option1", "option2"],
            closeOnSelect: true,
            openOnDoubleClick: false,
            highlightOnFocus: true,
            maxVisibleOptions: 6,
            noResultMessage: "Không tìm thấy kết quả nào",
            afterChange: (e) => {},
            style: {},
            ...settings,
          };

          this.dropdown = this.#createDropdown(this.displayBox.id);
          this.searchField = this.dropdown.children[0];
          this.list = this.dropdown.children[1];
          this.searchInput = this.searchField.querySelector("input");
          this.defaultSettings.data.forEach((item) => {
            const option = this.#createOption(item);
            this.#addEventListener(option, "click", (e) => {
              this.#handleSelectedOption(
                e.target.value,
                this.displayBox,
                this.searchInput,
                this.defaultSettings.afterChange
              );
            });
            this.list.append(option);
          });

          document.body.appendChild(this.dropdown);

          this.defaultSettings.openOnDoubleClick === true
            ? this.#addEventListener(
                this.displayBox,
                "dblclick",
                this.show.bind(this)
              )
            : this.#addEventListener(
                this.displayBox,
                "click",
                this.toggle.bind(this)
              );

          this.#addEventListener(
            this.searchInput,
            "input",
            this.#debounce(this.#searchOption.bind(this), 200)
          );
          this.#addEventListener(
            this.searchInput,
            "keydown",
            this.#handleKeyDown.bind(this)
          );
          // // Hide the dropdown if clicked outside
        }

        #addEventListener(element, event, handler = (e) => {}) {
          element.addEventListener(event, handler);
        }

        #removeEventListener(element, event, handler = (e) => {}) {
          element.removeEventListener(event, handler);
        }

        #handleOutsideClick(event) {
          const isClickInside =
            this.dropdown.contains(event.target) ||
            this.displayBox.contains(event.target);
          console.log(
            "click inside",
            this.dropdown.contains(event.target) ||
              this.displayBox.contains(event.target)
          );
          if (!isClickInside) {
            this.hide();
          }
        }

        #handleKeyDown(e) {
          // Ensure there are options available
          const options = this.list.children;
          if (options.length === 0) return;

          const maxIndex = options.length - 1;
          this.startedIndex = this.#updateStartedIndex(
            event.key,
            this.startedIndex,
            maxIndex
          );

          console.log("handleKeyDown(), value: ", e.target.value);

          // Remove the hover effect from all options
          this.#removeHoverEffectFromOptions(options);
          this.#handleNavigation(
            this.startedIndex,
            options,
            this.displayBox,
            this.searchInput,
            this.defaultSettings.afterChange,
            e
          );
        }

        #removeHoverEffectFromOptions(options) {
          // Remove the hover effect from all options
          Array.from(options).forEach((option) => {
            option.classList.remove("bg-gray-300");
            option.setAttribute("data-active", false);
          });
        }

        #applyHoverEffectToOption(options, index) {
          if (index >= 0 && index < options.length) {
            Array.from(options)[index].classList.add("bg-gray-300");
            Array.from(options)[index].setAttribute("data-active", true);
            Array.from(options)[index].scrollIntoView({
              block: "center", // Centers the option in the visible area
              // behavior: "smooth" // Optional: adds smooth scrolling
            });
          }
        }

        #showSelectionInDisplayBox(displayBox, searchBar, value) {
          setTimeout(() => {
            displayBox.innerHTML = `<span>${value}</span>`;
            displayBox.classList.add("flex", "items-center", "justify-start");
            displayBox.focus();
            searchBar.blur();
          }, 100);
        }

        #getSelectedOptionValue(options, index) {
          if (index >= 0 && index < options.length) {
            return options[index].innerText.trim();
          }
          return null;
        }

        #updateStartedIndex(key, currentIndex, maxIndex) {
          switch (key) {
            case "ArrowUp":
              return currentIndex > 0 ? currentIndex - 1 : currentIndex;
            case "ArrowDown":
              return currentIndex < maxIndex ? currentIndex + 1 : currentIndex;
            default:
              return currentIndex;
          }
        }

        // Impure function: triggers afterChange callback
        #triggerAfterChange(callback, selectionDetails) {
          callback(selectionDetails);
        }

        #handleNavigation(
          index,
          options,
          displayBox,
          searchInput,
          afterChange,
          event
        ) {
          const maxIndex = options.length - 1;

          if (event.key === "ArrowUp" || event.key === "ArrowDown") {
            this.#applyHoverEffectToOption(options, index);
          }

          if (event.key === "Enter" && index >= 0 && index <= maxIndex) {
            const value = this.#getSelectedOptionValue(options, index);

            if (value)
              this.#handleSelectedOption(
                value,
                displayBox,
                searchInput,
                afterChange
              );
          }
        }

        #positionDropdown() {
          const inputRect = this.displayBox.getBoundingClientRect();
          const inputHeight = inputRect.height;
          const dropdownRect = this.dropdown.getBoundingClientRect();
          const dropdownHeight = dropdownRect.height; // Set the fixed height of your dropdown
          const viewportHeight = window.innerHeight;
          const spaceBelow = viewportHeight - inputRect.bottom;

          if (spaceBelow < dropdownHeight) {
            this.dropdown.style.left = `${inputRect.left}px`;
            this.dropdown.style.top = `${inputRect.top - 6 - dropdownHeight}px`; // Move upwards
            this.dropdown.style.width = `${inputRect.width}px`;
            this.dropdown.style.zIndex = `99`;
            this.dropdown.style.marginTop = "0px";
            this.dropdown.style.marginBottom = "5px";
          } else {
            // Default case: open dropdown below the element
            this.dropdown.style.left = `${inputRect.left}px`;
            this.dropdown.style.top = `${inputRect.top + inputRect.height}px`;
            this.dropdown.style.width = `${inputRect.width}px`;
            this.dropdown.style.zIndex = `99`;
            this.dropdown.style.marginTop = "5px";
            this.dropdown.style.marginBottom = "0px";
          }
        }

        toggle(e) {
          if (this.dropdown.classList.contains("open")) {
            this.hide(e);
          } else {
            this.show(e);
          }
        }

        // // A method in the class
        show(e) {
          if (this.defaultSettings.highlightOnFocus) {
            this.displayBox.classList.add("highlight");
          }
          this.dropdown.classList.add("open");
          this.#positionDropdown();
          setTimeout(() => {
            this.searchInput.focus();
          }, 100);
          this.#addEventListener(
            document,
            "click",
            this.#handleOutsideClick.bind(this)
          );
        }

        // Another method
        hide() {
          this.displayBox.classList.remove("highlight");
          this.dropdown.classList.remove("open");
          this.#removeEventListener(
            document,
            "click",
            this.#handleOutsideClick.bind(this)
          );
        }

        #debounce(fn, delay) {
          let timeout;

          return function (...args) {
            clearTimeout(timeout);
            timeout = setTimeout(() => {
              fn.apply(this, args);
            }, delay);
          };
        }

        #createSearchField() {
          const wrapper = document.createElement("div");
          wrapper.className = "bg-white w-full";
          const searchBar = document.createElement("input");
          searchBar.setAttribute("tabindex", 0);
          searchBar.className =
            "p-[6px] w-full bg-white border outline-none rounded";
          wrapper.className =
            "p-2 rounded-none rounded-tl rounded-tr w-full border shadow";
          wrapper.appendChild(searchBar);

          return wrapper;
        }

        #handleSelectedOption(value, displayBox, searchInput, afterChange) {
          this.#showSelectionInDisplayBox(displayBox, searchInput, value);
          this.#triggerAfterChange(afterChange, { value, displayBox });
          if (this.defaultSettings.closeOnSelect) {
            this.hide();
          }
        }

        #createOption(value) {
          const refinedValue = value.toString().trim();
          const option = document.createElement("div");
          option.className =
            "hover:bg-gray-300 rounded cursor-pointer py-1 px-[6px]";
          option.innerText = refinedValue;
          option.value = refinedValue;
          return option;
        }

        #showFilteredOptions(element, data) {
          element.innerHTML = "";
          if (data.length > 0) {
            data.forEach((item) => {
              const option = this.#createOption(item);
              this.#addEventListener(option, "click", (e) => {
                this.#handleSelectedOption(
                  e.target.value,
                  this.displayBox,
                  this.searchInput,
                  this.defaultSettings.afterChange
                );
              });
              element.appendChild(option);
            });
          } else {
            const option = this.#createOption(
              this.defaultSettings.noResultMessage
            );
            option.classList.add("pointer-events-none");
            element.appendChild(option);
          }
        }

        #searchOption(e) {
          const searchKey = UTILITIES.normalizeForSearch(e.target.value);
          const result = this.defaultSettings.data.filter((item) =>
            UTILITIES.normalizeForSearch(item).includes(searchKey)
          );

          this.#showFilteredOptions(this.list, result);
        }

        #createDropdown(id, style) {
          const dropdown = document.createElement("div");
          dropdown.className =
            "absolute custom-dropdown bg-white mt-[8px] flex flex-col shadow ${style.displaybox}";
          dropdown.setAttribute("data-id", id);
          dropdown.setAttribute("role", "dropdown");

          const searchField = this.#createSearchField();
          searchField.setAttribute("role", "searchField");
          dropdown.appendChild(searchField);

          const list = document.createElement("div");
          list.className =
            "bg-white h-auto rounded rounded-tl-none rounded-tr-none overflow-auto flex flex-col gap-1 p-[6px] pl-1 border border-t-0 shadow";
          list.setAttribute("role", "list");
          dropdown.appendChild(list);
          return dropdown;
        }
      }

      const UI_COMPONENTS = {
        // getLastestSlimSelectInstances: () => {
        //   let instances = INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"];
        //   return instances.slice(instances - 2);
        // },

        // overrideListBoxAction: (instance) => {
        //   const listBoxes = Array.from(
        //     document.querySelectorAll(`[role="listbox"]`)
        //   );
        //   const listBoxId = instance.settings.id;
        //   const target = listBoxes.find(
        //     (element) => element.getAttribute("data-id") === listBoxId
        //   );
        //   console.log("target: ", target);
        //   target.addEventListener("keydown", (event) => {
        //     event.preventDefault();
        //     // console.log(
        //     //   "event.target.closest('listBoxId'): ",
        //     //   event.target.closest(listBoxId)
        //     // );
        //     console.log("listbox listening");
        //     // handleArrowNavigation(event, rowIndex, colIndex);
        //   });
        // },

        createInputField: ({
          style,
          label,
          type = "text",
          id = { container: "", title: "", input: "" },
          value = "",
          onInput = (e) => {},
        }) => {
          const container = document.createElement("div");
          container.id = id?.container;

          container.className = style?.container;

          const title = document.createElement("label");
          title.id = id?.title;
          title.className = style?.title;
          title.innerText = label;

          const input = document.createElement("input");
          input.id = id?.input;
          input.type = type;
          input.className = style?.input;
          input.value = value;
          input.oninput = onInput;

          container.append(title);
          container.append(input);

          return { container, title, input };
        },

        createArrowIcon: () => {
          const arrow = document.createElement("span");
          arrow.className =
            "absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500 text-xs z-10";
          arrow.innerHTML = '<i class="fas fa-chevron-down"></i>'; // Font Awesome arrow
          return arrow;
        },

        modifyStyleWhenDropdownOpen: (instance) => {
          const dropdown = instance.dropdown;
          dropdown.style.marginTop = "8px";
          dropdown.style.borderTop = "1px solid #d0d0d0";
          dropdown.style.borderRadius = "3px";

          const searchBarWrap = dropdown.querySelector(".dropdown-input-wrap");
          searchBarWrap.style.padding = "10px";
          searchBarWrap.style.borderRadius = "3px 3px 0 0";
          searchBarWrap.style.borderBottom = "1px solid #d0d0d0";

          const searchBar = searchBarWrap.querySelector("input");
          searchBar.style.position = "static";
          searchBar.style.border = "1px solid #a1a1a1";
          searchBar.style.borderRadius = "3px";
          searchBar.style.padding = "6px 8px";
          searchBar.style.fontSize = "13px";
          searchBar.style.height = "30px";

          const control = instance.control;
          control.style.borderRadius = "3px 3px 0 0";
        },

        modifyStyleWhenDropdownClose: (instance) => {
          const control = instance.control;
          control.style.borderRadius = "3px";
        },

        addStyleToTomSelect: ({
          element,
          wrapperStyle,
          controlStyle,
          dropdownStyle,
        }) => {
          if (!element) {
            return;
          }

          console.log("element: ", element);

          if (wrapperStyle) {
            const wrapper = element.wrapper;
            wrapper.classList.add(...wrapperStyle);
          }

          if (controlStyle) {
            const control = element.control;
            control.classList.add(...controlStyle);
          }

          if (dropdownStyle) {
            const dropdown = element.dropdown;
            dropdown.classList.add(...dropdownStyle);
          }
        },

        addArrowToTomSelect: (instance) => {
          const wrapper = instance.control;
          wrapper.classList.add("relative");
          const arrow = document.createElement("span");
          arrow.className =
            "absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-gray-500 text-xs";
          arrow.innerHTML = '<i class="fas fa-chevron-down"></i>'; // Font Awesome arrow

          wrapper.appendChild(arrow);
        },

        createTextarea: ({
          id = {
            container: "",
            label: "",
            textarea: "",
          },
          title = "Text area",
          value = "",
          onInput = (e) => {},
          style = {
            container: "",
            title: "",
            textarea: "",
          },
        }) => {
          const label = document.createElement("label");
          label.className = `mb-2 ${style?.title}`;
          label.innerText = title;
          label.id = id?.label;

          const textArea = document.createElement("textarea");
          textArea.className = style?.textarea;
          textArea.value = value;
          textArea.name = title;
          textArea.oninput = onInput;
          textArea.innerText = value;
          textArea.id = id?.textarea;

          const container = document.createElement("div");
          container.className = style?.container;
          container.id = id?.container;
          container.appendChild(label);
          container.appendChild(textArea);

          return container;
        },

        createInput: ({
          id = "",
          title = "Input",
          titleOff = false,
          value = "",
          type = "text",
          style = {
            container: "",
            title: "",
            input: "",
          },
          attribute = {
            name: "",
          },
          placeholder = "",
          disabled = false,
          onInput = (e) => {},
          onClick = (e) => {},
        }) => {
          // Create container, label, and input elements
          const container = document.createElement("div");
          const label = document.createElement("label");
          const input = document.createElement("input");
          // Disable the increment arrow

          container.className = style.container;

          // Set label text and styling

          if (!titleOff) {
            label.innerText = title;
            label.htmlFor = id;
          }

          label.className = `mb-2 ${style.title}`;

          // Set input attributes and styling
          input.stepUp = 0;
          input.className = style.input;
          input.id = id;
          input.type = type;
          input.value = value;
          input.placeholder = placeholder;
          input.name = attribute?.name;
          input.disabled = disabled;
          input.oninput = onInput;
          input.onclick = onClick;

          // Append label and input to the container
          if(type === "radio") {
            container.appendChild(input);
            container.appendChild(label);
          } else {
            container.appendChild(label);
            container.appendChild(input);
          }

          // Return the container
          return container;
        },

        createTextInput: (id, className, field, action) => {
          // Create container, label, and input elements
          const container = document.createElement("div");
          const label = document.createElement("label");
          const input = document.createElement("input");

          // Set label text and styling
          label.classList.add("mb-2");
          label.innerText = field;

          // Set input attributes and styling
          input.type = "text";
          input.id = id;
          input.className = `${DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD} rounded-lg`;

          // Assign the action function to the input event
          input.oninput = (e) => action(e, field);

          // Append label and input to the container
          container.appendChild(label);
          container.appendChild(input);

          // Return the container
          return container;
        },

        createSelectInput: ({
          id = "",
          title = "",
          titleOff = false,
          options = [],
          multipleSelect = false,
          style = {
            container: ["custom-style"],
            title: ["custom-style"],
            input: ["custom-style"],
          },
        }) => {
          // Create container, label, and select elements
          const container = document.createElement("div");
          if (style.container) {
            let classes = UTILITIES.cleanArray(style.container);
            container.classList.add(...classes);
          } else {
            container.classList.add("min-w-[250px]", "w-[250px]");
          }

          const label = document.createElement("label");
          if (style.title) {
            let classes = UTILITIES.cleanArray(style.title);
            label.classList.add("mb-2", ...classes);
          } else {
            label.classList.add("mb-2");
          }

          label.innerText = title;

          // Append label and select to the container
          if (!titleOff) {
            container.appendChild(label);
          }

          const select = document.createElement("select");
          // Set select attributes and styling
          select.setAttribute("data-field", title);
          select.classList.add("flex", "w-full");
          select.id = id;

          if (multipleSelect) {
            select.setAttribute("multiple", true);
            select.setAttribute("role", "multiple-select");
          } else {
            select.setAttribute("role", "single-select");
          }

          // Append options to the select element
          options.forEach((item, index) => {
            const option = document.createElement("option");
            option.value = item;
            option.innerText = item;

            if (index === 0) {
              const placeholderOption = document.createElement("option");
              placeholderOption.dataset.placeholder = "true";
              select.appendChild(placeholderOption);
            }

            select.appendChild(option);
          });

          container.appendChild(select);

          // Return the container
          return container;
        },

        createButton: ({
          id,
          classNames,
          label = "BUTTON",
          event = { type: "", action: () => {} },
          attribute = { name: "", value: "" },
        }) => {
          // Create button element
          const button = document.createElement("button");

          // Set properties
          button.className = `${classNames} ${DEFAULT_CONFIG.STYLE.BUTTON}`; // Use className instead of classList.add for all classes
          button.innerText = label;
          if (id) {
            button.id = id;
          }

          // Only set attribute if both name and value are provided
          if (attribute.name && attribute.value) {
            button.setAttribute(attribute.name, attribute.value);
          }

          // Only add event listener if the event type and action are valid
          if (event.type && typeof event.action === "function") {
            button.addEventListener(event.type, event.action);
          }

          return button;
        },

        createDropdownInput: ({
          inputId = "",
          dropdownId = "",
          dropdownButtonId = "",
          buttonLabel = "Chọn điều kiện",
          classNames = "",
          title = "Dropdown input",
          dropdownOptions = [],
          dropdownButtonClicked = () => {},
          dropdownClicked = () => {},
          inputChange = () => {},
        }) => {
          const element = document.createElement("form");
          element.classList.add("max-w-md");
          element.innerHTML =
            '<div class="flex flex-col relative">' +
            '<label for="' +
            inputId +
            '" class="mb-2 text-sm font-medium text-gray-900">' +
            title +
            "</label>" +
            '<div class="flex flex-row relative">' +
            '<button  id="' +
            dropdownButtonId +
            '" class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-e-0 border-[#ccc] rounded-s-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-300" type="button">' +
            buttonLabel +
            '<svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">' +
            '<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>' +
            "</svg>" +
            "</button>" +
            '<div id="' +
            dropdownId +
            '" class="dropdown-input hidden">' +
            '<ul class="py-2 text-sm text-gray-700">' +
            dropdownOptions
              .map(function (option) {
                return (
                  "<li>" +
                  '<div value="' +
                  option +
                  '" class="block px-4 py-2 hover:bg-gray-100">' +
                  option +
                  "</div>" +
                  "</li>"
                );
              })
              .join("") +
            "</ul>" +
            "</div>" +
            '<div class="relative w-full">' +
            '<input type="search" id="' +
            inputId +
            '" class="block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg rounded-s-gray-100 rounded-s-2 border border-[#ccc] focus:ring-blue-500 focus:ring-2" placeholder="" />' +
            "</div>" +
            "</div>" +
            "</div>";
          return element;
        },

        createFileInput: ({ label = "Upload file", id = "file_input" }) => {
          const container = document.createElement("div");
          const labelElement = document.createElement("label");
          const inputElement = document.createElement("input");

          labelElement.classList.add(
            "block",
            "mb-2",
            "text-sm",
            "font-medium",
            "text-gray-900"
          );
          labelElement.setAttribute("for", id);
          labelElement.textContent = label;

          inputElement.classList.add(
            "block",
            "w-full",
            "text-sm",
            "text-gray-900",
            "border",
            "border-[#ccc]",
            "rounded-lg",
            "cursor-pointer",
            "bg-gray-50",
            "focus:outline-none"
          );
          inputElement.setAttribute("id", id);
          inputElement.setAttribute("type", "file");

          container.appendChild(labelElement);
          container.appendChild(inputElement);

          return container;
        },

        createDropzone: ({
          label = "Dropzone",
          className = "",
          id = "dropzone-file",
        }) => {
          const container = document.createElement("div");
          const labelElement = document.createElement("label");
          const inputElement = document.createElement("input");
          const innerDiv = document.createElement("div");
          const svgElement = document.createElementNS(
            "http://www.w3.org/2000/svg",
            "svg"
          );
          const p1 = document.createElement("p");
          const p2 = document.createElement("p");

          container.classList.add(
            "flex",
            "items-center",
            "justify-center",
            "w-full",
            "h-full"
          );

          labelElement.classList.add(
            "flex",
            "flex-col",
            "items-center",
            "justify-center",
            "w-full",
            "h-64",
            "border-2",
            "border-[#ccc]",
            "border-dashed",
            "rounded-lg",
            "cursor-pointer",
            "bg-gray-50",
            "hover:bg-gray-100",
            className
          );
          labelElement.setAttribute("for", id);

          svgElement.classList.add("w-8", "h-8", "mb-4", "text-gray-500");
          svgElement.setAttribute("aria-hidden", "true");
          svgElement.setAttribute("xmlns", "http://www.w3.org/2000/svg");
          svgElement.setAttribute("fill", "none");
          svgElement.setAttribute("viewBox", "0 0 20 16");
          svgElement.innerHTML = `<path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>`;

          p1.classList.add("mb-2", "text-sm", "text-gray-500");
          p1.innerHTML = `<span class="font-semibold">Click to upload</span> or drag and drop`;

          p2.classList.add("text-xs", "text-gray-500");
          p2.textContent = "SVG, PNG, JPG or GIF (MAX. 800x400px)";

          innerDiv.classList.add(
            "flex",
            "flex-col",
            "items-center",
            "justify-center",
            "pt-5",
            "pb-6"
          );
          innerDiv.appendChild(svgElement);
          innerDiv.appendChild(p1);
          innerDiv.appendChild(p2);

          inputElement.setAttribute("id", id);
          inputElement.setAttribute("type", "file");
          inputElement.classList.add("hidden");

          labelElement.appendChild(innerDiv);
          labelElement.appendChild(inputElement);
          container.appendChild(labelElement);

          return container;
        },

        createUnitField: ({
          id,
          title,
          action = () => {},
          labelOff = false,
          style,
          containerStyle,
          multipleSelect,
        }) => {
          return UI_COMPONENTS.createSelectInput({
            id,
            title,
            titleOff: labelOff,
            options: DEFAULT_CONFIG.UNIT_OPTIONS,
            containerStyle,
            style,
            multipleSelect,
            optionClicked: action,
          });
        },

        createSelectField: ({
          id = {},
          style = { container: "", title: "", select: "", displaybox: "" },
          title,
          titleOff = false,
          arrowIcon = true,
          type = "text",
          value = "",
          onInput = (e) => {},
          mode = "classic",
        }) => {
          const container = document.createElement("div");
          container.id = UTILITIES.generateRandomId(21);
          container.className = `cursor-pointer ${style?.container}`;

          switch (mode) {
            case "classic":
              break;
            case "modern":
              break;
          }

          if (!titleOff) {
            const label = document.createElement("label");
            label.id = UTILITIES.generateRandomId(21);
            label.className = `${style?.title}`;
            label.innerText = title;
            container.append(label);
          }

          const select = document.createElement("div");
          select.id = UTILITIES.generateRandomId(21);
          select.className = `relative w-full h-[30px] ${style?.select}`;

          const displaybox = document.createElement("div");
          displaybox.id = id?.displaybox || "";
          displaybox.setAttribute("role", "displaybox");
          displaybox.className = `${style?.displaybox}`;
          displaybox.innerText = value;
          displaybox.oninput = onInput;

          select.append(displaybox);

          if (arrowIcon) {
            const arrow = UI_COMPONENTS.createArrowIcon();
            select.append(arrow);
          }

          container.append(select);

          return { container, title, select };
        },

        createNameField: ({ title, action = () => {}, multipleSelect }) => {
          const activeTable = STORAGE.getActiveTable();
          if (
            activeTable === LABELS.CUSTOMER ||
            activeTable === LABELS.ORDER_SUMMARY
          ) {
            let data = STORAGE.getCustomerList();
            let id = UTILITIES.generateRandomId(21);
            return UI_COMPONENTS.createSelectInput({
              id,
              title,
              options: data,
              optionClicked: action,
              multipleSelect,
            });
          }

          if (
            activeTable === LABELS.PRODUCTION ||
            activeTable === LABELS.PRODUCT
          ) {
            let data = STORAGE.getProductList();
            let id = UTILITIES.generateRandomId(21);
            return UI_COMPONENTS.createSelectInput({
              id,
              title,
              options: data,
              optionClicked: action,
              multipleSelect,
            });
          }

          return null;
        },

        createStatusField: ({ title, action = () => {}, multipleSelect }) => {
          const activeTable = STORAGE.getActiveTable();
          const data = DEFAULT_CONFIG.STATUS_OPTIONS[activeTable];
          let id = UTILITIES.generateRandomId(21);

          return UI_COMPONENTS.createSelectInput({
            id,
            title,
            options: data,
            optionClicked: action,
            multipleSelect,
          });
        },

        createCustomerField: ({
          id = UTILITIES.generateRandomId(21),
          title,
          action = () => {},
          multipleSelect,
          style,
        }) => {
          let data = STORAGE.getCustomerList();
          return UI_COMPONENTS.createSelectInput({
            id,
            title,
            options: data,
            style,
            optionClicked: action,
            multipleSelect,
          });
        },

        createRadioField: ({
          id = "",
          attribute = {
            name: "",
          },
          title = "title",
          style = {
            container: "",
            title: "",
            radioTitle: "",
            input: "",
          },
          options = [],
          onClick = () => {},
        }) => {
          const container = document.createElement("div");
          container.className = `${style?.container}`;
          container.id = id;

          const label = document.createElement("label");
          label.className = `${style?.title}`;
          label.innerText = title;
          container.append(label);

          const containerStyle = style?.container;
          const radioTitleStyle = style?.radioTitle;
          const inputStyle = style?.input;

          options.forEach((option, index) => {
            container.append(
              UI_COMPONENTS.createInput({
                id: UTILITIES.generateRandomId(21),
                attribute,
                title: option,
                value: option,
                onClick,
                type: "radio",
                style: {
                  container: `${containerStyle} ${
                    index === 0 ? "m-0" : "ml-4"
                  }`,
                  title: radioTitleStyle,
                  input: inputStyle,
                },
              })
            );
          });

          return container;
        },

        // createProductField: ({ label = "Label", action = () => {} }) => {
        //   let data = STORAGE.getProductList();
        //   let id = UTILITIES.generateRandomId(21);
        //   let activeTable = STORAGE.getActiveTable();
        //   return UI_COMPONENTS.createSelectInput({
        //     id,
        //     field: label,
        //     options: data,
        //     optionClicked: action,
        //   });
        // },

        createProductField: ({
          title,
          titleOff = false,
          multipleSelect,
          containerStyle,
          style,
          classNames,
        }) => {
          const activeTable = STORAGE.getActiveTable();
          if (activeTable === LABELS.ORDER_SUMMARY) {
            let data = STORAGE.getProductList();
            let id = UTILITIES.generateRandomId(21);
            return UI_COMPONENTS.createSelectInput({
              id,
              title,
              titleOff,
              options: data,
              multipleSelect,
              containerStyle,
              style,
              // optionClicked: "HANDLERS.handleFilterInputFieldChange",
              classNames,
            });
          }

          if (activeTable === LABELS.PRODUCTION) {
            return UI_COMPONENTS.createInput({
              title,
              type: "number",
            });
          }
          return null;
        },

        activateTomSelect: ({}) => {},

        activateSlimSelect: ({
          store,
          key,
          element,
          settings = {
            closeOnSelect: false,
            allowDeselect: true,
            maxValuesShown: 1,
            maxValuesMessage: "Đã chọn {number}",
            placeholderText: "",
          },
          eventActions = {},
        }) => {
          if (element !== null && !element.slim) {
            const instance = new SlimSelect({
              select: element,
              settings: settings,
              events: eventActions,
            });

            if (!store[key]) {
              store[key] = [];
            }

            store[key].push(instance);
          }

          // switch (field) {
          //   case LABELS.NAME:
          //   case LABELS.STATUS:
          //     // const target = element.querySelector('[role="multiple-select"]');

          //     break;
          //   default:
          //     break;
          // }
        },

        destroyMultipleSelect: (table, field) => {
          if (
            INSTANCES.FILTER[table][field] &&
            INSTANCES.FILTER[table][field]
          ) {
            INSTANCES.FILTER[table][field].destroy();
            delete INSTANCES.FILTER[table][field];
          }
        },
        generateRow: (fields, style, rowIndex) => {
          const row = document.createElement("tr");
          const defaultClasses = [...style, "h-[30px]"];

          const handleSingleClickInSpreadsheet = (e) => {
            const currentInput = e.target;
            const currentCell = currentInput.closest("td");
            const id = currentInput.id;
            const field = currentInput.getAttribute("data-field");
            const table = currentInput.closest("table");
            const prevCell = table.querySelector("td.highlight") || null;

            if (prevCell) {
              const prevInput =
                prevCell.querySelector("input") ||
                prevCell.querySelector('[role="displaybox"]');

              prevInput.setAttribute("readonly", true);
              prevInput.blur();
              prevCell.setAttribute("data-active", false);
              prevCell.classList.remove("highlight");
              prevCell.blur();
            }

            if (currentCell && currentCell.contains(currentInput)) {
              // if(field === LABELS.UNIT || field === LABELS.PRODUCT) {
              //   const instances = STORE.get("SELECT_INSTANCES_IN_SPREADSHEET")
              //   const target = instances.filter((param) => {

              //   }
              //   )
              // }
              console.log("currentInput: ", currentInput);

              currentCell.setAttribute("data-active", true);
              currentCell.classList.add("highlight");
            }

            // STORAGE.setActiveCell(true, event.target.id);
            STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
          };

          const handleDoubleClickInSpreadsheet = (e) => {
            const element = e.target;
            const field = element.getAttribute("data-field");
            if (field !== LABELS.UNIT || field !== LABELS.PRODUCT) {
              element.removeAttribute("readonly");
              element.focus(); // Focus the cell for editing
            }

            STORAGE.setSpreadsheetMode(LABELS.EDITING);
          };

          const saveSelectedValueToSessionStorage = (selectionDetails) => {
            const currentElement = selectionDetails.displayBox;
            const parentElement = currentElement.closest("td");
            const rowIndex = parentElement.getAttribute("data-row-index");
            const colIndex = parentElement.getAttribute("data-col-index");
            const list = STORAGE.getNewItemOrderInfo();
            const fields = DEFAULT_CONFIG.SPREADSHEET.FIELDS;
            const key = fields[colIndex];
            const value =
              key === LABELS.NOTE ||
              key === LABELS.PRODUCT ||
              key === LABELS.UNIT
                ? selectionDetails.value
                : UTILITIES.parseNumber(selectionDetails.value);

            let newData = {};

            console.log("list: ", list);

            // Check if the row exists, otherwise initialize it as an empty object
            const itemDetails = list[rowIndex] || {}; // Fallback to an empty object if row doesn't exist

            // Merge new key-value pair into the existing item details
            newData = { ...itemDetails, [key]: value };

            // Update the list with the new/updated data
            list[rowIndex] = newData;

            STORAGE.setNewItemOrderInfo(list);
          };

          fields.forEach((field, colIndex) => {
            const id = UTILITIES.generateRandomId(33);
            const classes = `
                              ${style.join(" ")}
                              ${
                                field === LABELS.PRODUCT
                                  ? "w-[250px]"
                                  : "w-[150px]"
                              }
                              p-2
                              outline-none
                              relative
                              ${
                                field === LABELS.PRODUCT ||
                                field === LABELS.UNIT
                                  ? "cursor-pointer"
                                  : ""
                              }
                              `.trim();
            const td = document.createElement("td");
            td.id = UTILITIES.generateRandomId(33);
            td.className = `
                            border
                            border-[#ccc]
                            ${
                              fields.length - 1 === colIndex
                                ? "border-r-0"
                                : "border-l-0"
                            }
                          `.trim();

            td.setAttribute("data-row-index", rowIndex);
            td.setAttribute("data-col-index", colIndex);
            td.setAttribute("data-field", field);
            td.setAttribute("tabindex", "-1");

            let cell, element;

            cell = document.createElement("div");
            cell.classList.add("relative");

            if (field === LABELS.PRODUCT || field === LABELS.UNIT) {
              const displaybox = document.createElement("div");
              displaybox.id = id;
              displaybox.setAttribute("role", "displaybox");
              displaybox.className = classes;

              const arrow = UI_COMPONENTS.createArrowIcon();

              cell.append(arrow);
              cell.append(displaybox);

              STORE.save({
                key: "SELECT_INSTANCES_IN_SPREADSHEET",
                type: "array",
                value: new CustomSelect(displaybox, {
                  data:
                    field === LABELS.PRODUCT
                      ? STORAGE.getProductList()
                      : DEFAULT_CONFIG.UNIT_OPTIONS,
                  highlightOnFocus: false,
                  afterChange: (selectionDetails) => {
                    STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
                    // HANDLERS.enterNavigatingMode(selectionDetails.displayBox);
                    saveSelectedValueToSessionStorage(selectionDetails);
                    td.focus();

                    // Create a custom "ArrowLeft" keydown event
                    const rightArrowEvent = new KeyboardEvent("keydown", {
                      key: "ArrowRight", // The key pressed
                      keyCode: 39, // ArrowRight key code
                      code: "ArrowRight", // Key's code
                      which: 39, // 'which' is for older browsers
                      bubbles: true, // Enable event bubbling
                      cancelable: true, // Allow event cancellation
                    });

                    td.dispatchEvent(rightArrowEvent);
                  },
                }),
                rowIndex,
                colIndex,
              });
            } else {
              element = document.createElement("input");
              element.setAttribute("readonly", true);
              element.id = id;
              element.className = classes;
              element.oninput = (e) => {
                HANDLERS.saveOrderDetailsToSessionStorage(e);

                HANDLERS.handleFormatNumber(e);

                HANDLERS.handleCellCalculation(e);

                HANDLERS.handleTotalCalculation(e);
              };
              cell.appendChild(element);
            }

            // rowIds.push(id);

            // Add keydown event listener for arrow key navigation
            td.addEventListener("keydown", (e) => {
              const navigationKeys = [
                "ArrowDown",
                "ArrowUp",
                "ArrowLeft",
                "ArrowRight",
                "Enter",
              ];
              if (navigationKeys.includes(e.key) || e.shiftKey) {
                HANDLERS.handleArrowNavigation(e);
              } else {
                if (field !== LABELS.PRODUCT || field !== LABELS.UNIT) {
                  console.log("element: ", element);
                  STORAGE.setSpreadsheetMode(LABELS.EDITING);
                  element.removeAttribute("readonly");
                  element.focus();
                }
              }
            });
            td.addEventListener("click", handleSingleClickInSpreadsheet);
            td.addEventListener("dblclick", handleDoubleClickInSpreadsheet);
            td.append(cell);
            row.append(td);
          });
          // ELEMENT_IDS.MODAL.saveId(LABELS.DATABASE, { data: rowIds });
          return row;
        },

        generateSpreadsheetTable: (containerId) => {
          let id = "";
          let rowIds = [];
          let tableIds = [];

          // Create table element
          const table = document.createElement("table");
          id = UTILITIES.generateRandomId(21);
          table.id = id;
          ELEMENT_IDS.MODAL.saveId(LABELS.DATABASE, {
            id: id,
            data: [],
          });

          // Create table header
          const thead = document.createElement("thead");
          const headerRow = document.createElement("tr");
          headerRow.classList.add("text-[13px]", "font-bold", "bg-gray-200");

          DEFAULT_CONFIG.SPREADSHEET.FIELDS.forEach((field) => {
            const th = document.createElement("th");
            th.innerText = field;
            headerRow.append(th);
          });
          thead.append(headerRow);
          table.append(thead);

          // Create table body
          const tbody = document.createElement("tbody");

          for (let i = 0; i < DEFAULT_CONFIG.SPREADSHEET.ROW_NUMBER; i++) {
            let row = UI_COMPONENTS.generateRow(
              DEFAULT_CONFIG.SPREADSHEET.FIELDS,
              DEFAULT_CONFIG.SPREADSHEET.CELL_STYLE,
              i
            );

            console.log("row 1: ", row);
            tbody.append(row);
          }
          table.append(tbody);

          return table;
          // Append the table to the container
          // document.getElementById(containerId).appendChild(table);
        },

        // Function to handle arrow key navigation

        applyFormLayout: (layout, data) => {
          switch (layout) {
            case "CLASSIC":
              data.forEach((element) => {
                if (element) {
                  element.classList.add("flex", "flex-row", "gap-4", "mb-4");
                  const children = element.children; // This will give you an HTMLCollection of the child elements

                  // Ensure there are at least two child elements before modifying them
                  if (children.length >= 2) {
                    // Apply classes to the first child element (20% width)
                    children[0].classList.remove("mb-2");
                    children[0].classList.add(
                      "basis-1/5",
                      "flex-none",
                      "text-right"
                    );

                    // Apply classes to the second child element (remaining 80% width)
                    children[1].classList.add("flex-grow");
                  }
                }
              });
              return data;
            default:
              data.forEach((element) => {
                if (element) {
                  element.classList.add("mb-4", "flex", "flex-col", "gap-2");
                  const label = element.querySelector("label");
                  if (label) {
                    label.classList.remove("mb-2");
                  }
                }
              });
              return data;
          }
        },

        setValueToFieldById: (id, value) => {
          document.getElementById(id).value = value;
        },

        activateDateInput: (elementId) => {
          if (!elementId) {
            console.error("Id is not found");
            return;
          }

          const element = document.getElementById(elementId);
          // Function to handle the input event
          const handleInput = (event) => {
            let value = event.target.value.replace(/[^0-9]/g, ""); // Only keep numeric characters

            // Auto-insert slashes as the user types
            if (value.length > 2) {
              value = value.slice(0, 2) + "/" + value.slice(2);
            }
            if (value.length > 4) {
              value = value.slice(0, 5) + "/" + value.slice(5);
            }

            event.target.value = value;
          };

          // Function to handle the keydown event to prevent non-numeric input
          const handleKeydown = (event) => {
            // Allow control keys like Backspace, Tab, Arrow keys, Delete
            const allowedKeys = [
              "Backspace",
              "Tab",
              "ArrowLeft",
              "ArrowRight",
              "Delete",
            ];

            // Check if the pressed key is a digit or allowed key
            if (!/^\d$/.test(event.key) && !allowedKeys.includes(event.key)) {
              event.preventDefault(); // Stop the event if it's not a number or an allowed key
            }
          };

          // Attach the event listeners to the input element
          element.addEventListener("input", handleInput);
          element.addEventListener("keydown", handleKeydown);
          element.setAttribute("maxlength", "10");
        },

        addStyleToSlimSelect: ({ elements, table, style }) => {
          elements.forEach((element, index) => {
            element.classList.add(...style);
            element.addEventListener("click", (event) => {
              element.focus();
            });
          });
        },
      };

      const HANDLERS = {
        saveOrderDetailsToSessionStorage: (e) => {
          const currentElement = e.target;
          const parentElement = currentElement.closest("td");
          const rowIndex = parentElement.getAttribute("data-row-index");
          const colIndex = parentElement.getAttribute("data-col-index");
          const list = STORAGE.getNewItemOrderInfo();
          const fields = DEFAULT_CONFIG.SPREADSHEET.FIELDS;
          const key = fields[colIndex];
          const value =
            key === LABELS.NOTE || key === LABELS.PRODUCT || key === LABELS.UNIT
              ? e.target.value
              : UTILITIES.parseNumber(e.target.value);

          let newData = {};

          console.log("list: ", list);

          // Check if the row exists, otherwise initialize it as an empty object
          const itemDetails = list[rowIndex] || {}; // Fallback to an empty object if row doesn't exist

          // Merge new key-value pair into the existing item details
          newData = { ...itemDetails, [key]: value };

          // Update the list with the new/updated data
          list[rowIndex] = newData;

          STORAGE.setNewItemOrderInfo(list);
        },

        saveCustomerInfoToSessionStorage: (e) => {
          const customerInfo = STORAGE.getNewItemCustomerInfo()
          const label = e.target.previousElementSibling.innerText
          const newValue = {...customerInfo,[label]: e.target.value}
          STORAGE.setNewItemCustomerInfo(newValue)
        },

        handleAddFormInput: (e) => {
          const activeTable = STORAGE.getActiveTable();
          let value, key;
          value = e.target.value;
          key = e.target.name;

          STORAGE.setNewItem(key, value, activeTable);
        },

        handleModalMultipleSelect: (field, selectedValues, id) => {
          let item = STORAGE.getNewItem();

          if (!item[field]) {
            item[field] = {};
          }
          item[field] = {
            value: [...selectedValues],
            id: id,
            name: field,
          };
          STORAGE.setFilterFieldsByTable(activeTable, filterData);
        },

        handleFilterMultipleSelect: (field, selectedValues) => {
          const activeTable = STORAGE.getActiveTable();
          let filterData = STORAGE.getFilterFieldsByTable(activeTable);
          filterData[field] = {
            ...filterData[field],
            value: [...selectedValues],
          };
          STORAGE.setFilterFieldsByTable(activeTable, filterData);
        },

        handleFilterInputFieldChange: (e, field) => {
          const activeTable = STORAGE.getActiveTable();
          let filterData = STORAGE.getFilterFieldsByTable(activeTable);
          filterData[field] = {
            ...filterData[field],
            value: e.target.value,
            id: e.target.id,
            name: field,
          };
          STORAGE.setFilterFieldsByTable(activeTable, filterData);
        },

        handleFilterDropdownClick: (
          e,
          field,
          value,
          dropdownId,
          dropdownButtonId
        ) => {
          updateFilterCondition(field, value);
          changeButtonLabel(dropdownButtonId, value);
          toggleDropdown(null, dropdownId);
        },


        // saveSelectedValueToSessionStorage: ({ value, displayBox }) => {
        //   console.log("displaybox: ", displayBox);
        //   const td = displayBox.closest("td");
        //   const rowIndex = td.getAttribute("data-row-index");
        //   const colIndex = td.getAttribute("data-col-index");
        //   const list = STORAGE.getNewItemOrderInfo();
        //   const fields = DEFAULT_CONFIG.SPREADSHEET.FIELDS;
        //   const key = fields[colIndex];
        //   let newData = {};

        //   console.log("list: ", list);

        //   // Check if the row exists, otherwise initialize it as an empty object
        //   const itemDetails = list[rowIndex] || {}; // Fallback to an empty object if row doesn't exist

        //   // Merge new key-value pair into the existing item details
        //   newData = { ...itemDetails, [key]: value };

        //   // Update the list with the new/updated data
        //   list[rowIndex] = newData;

        //   STORAGE.setNewItemOrderInfo(list);
        // },


        handleFormatNumber: (e) => {
          const value = e.target.value;
          const formattedValue = UTILITIES.formatNumberWithCommas(value);
          if (formattedValue) {
            e.target.value = formattedValue;
          }
        },

        handleTotalCalculation: () => {
          const list = STORAGE.getNewItemOrderInfo();
          let total = 0;
          list.forEach((item) => {

              total += item[LABELS.TOTAL_AMOUNT] * 1;

          });
          let id = ELEMENT_IDS.MODAL.getId(LABELS.TOTAL_AMOUNT);
          const element = document.getElementById(id);
          const result = element.querySelector("p");
          result.innerText = UTILITIES.formatNumberWithCommas(total);
        },

        handleCellCalculation: (event) => {
          const list = STORAGE.getNewItemOrderInfo();

          const getRow = () => {
            const cell = event.target.closest("tr").querySelector("td");
            return cell.getAttribute("data-row-index");
          };

          const calculateTotal = () => {
            const rowIndex = getRow();
            const quantity = list[rowIndex][LABELS.QUANTITY] * 1 || 0;
            const unitCost = list[rowIndex][LABELS.UNIT_COST] * 1 || 0;
            console.log("unitCost: ", unitCost);
            const tax = list[rowIndex][LABELS.TAX] * 1 || 0;
            const subTotal = quantity * unitCost;
            const taxAmount = (subTotal * tax) / 100;
            let total = subTotal + taxAmount;
            console.log("total: ", total);

            // total.toFixed(3);
            return total;
          };

          const saveItemDetails = (value) => {
            const rowIndex = getRow();
            const fields = DEFAULT_CONFIG.SPREADSHEET.FIELDS;
            const key = fields[5];
            const itemDetails = list[rowIndex] || {};
            const newData = { ...itemDetails, [key]: value };
            list[rowIndex] = newData;
            STORAGE.setNewItemOrderInfo(list);
          };

          const displayToUser = (value) => {
            const cells = event.target.closest("tr").querySelectorAll("td");
            const targetCell = Array.from(cells).find(
              (cell) => cell.getAttribute("data-col-index") === "5"
            );
            const targetInput = targetCell.querySelector("input");
            targetInput.value = value;
            targetInput.placeholder = value;
          };

          const total = calculateTotal();
          const formattedValue = UTILITIES.formatNumberWithCommas(total);
          displayToUser(formattedValue);
          saveItemDetails(total);
        },

        handleArrowNavigation: (event) => {
          const currentCell =
            event.target.tagName !== "td"
              ? event.target.closest("td")
              : event.target;
          const currentInput =
            currentCell.querySelector("input") ||
            currentCell.querySelector('[role="displaybox"]');
          const currentField = currentCell.getAttribute("data-field");
          const currentRowIndex =
            currentCell.getAttribute("data-row-index") * 1;
          const currentColIndex =
            currentCell.getAttribute("data-col-index") * 1;
          const table = currentCell.closest("table");
          const rows = Array.from(table.querySelectorAll("tr")).slice(1);

          // Keep track of whether the user is currently editing or navigating
          const state = STORAGE.getSpreadsheetMode();

          const blurCell = (cell) => {
            if (cell) {
              cell.blur();
              cell.setAttribute("data-active", false);
              cell.classList.remove("highlight");
            }
          };

          const focusCell = (cell) => {
            if (cell) {
              cell.focus();
              cell.setAttribute("data-active", true);
              cell.classList.add("highlight");
            }
          };

          const navigateDown = () => {
            if (currentRowIndex < rows.length - 1) {
              const nextRow = rows[currentRowIndex + 1];
              const nextCell = nextRow.children[currentColIndex];
              blurCell(currentCell);
              focusCell(nextCell);
            }
          };
          const navigateUp = () => {
            if (currentRowIndex > 0) {
              const prevRow = rows[currentRowIndex - 1];
              const nextCell = prevRow.children[currentColIndex];
              blurCell(currentCell);
              focusCell(nextCell);
            }
          };
          const navigateLeft = () => {
            if (currentColIndex > 0) {
              const currentRow = rows[currentRowIndex];
              const nextCell = currentRow.children[currentColIndex - 1];

              console.log("prevInput: ", currentCell);
              console.log("currentCell: ", nextCell);
              blurCell(currentCell);
              focusCell(nextCell);
            }
          };
          const navigateRight = () => {
            const currentRow = rows[currentRowIndex];
            if (currentColIndex < currentRow.children.length - 1) {
              const nextCell = currentRow.children[currentColIndex + 1];
              blurCell(currentCell);
              focusCell(nextCell);
            } else {
              if (currentRowIndex < rows.length - 1) {
                const nextRow = rows[currentRowIndex + 1];
                const firstCell = nextRow.children[0];
                blurCell(currentCell);
                focusCell(firstCell);
              }
            }
          };

          const enterNavigatingMode = () => {
            STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
            console.log("currentInput: ", currentInput);
            currentInput.setAttribute("readonly", true);
            currentCell.focus();
          };

          const enterEditingMode = () => {
            STORAGE.setSpreadsheetMode(LABELS.EDITING);
            console.log("field: ", currentField);
            if (
              currentField === LABELS.PRODUCT ||
              currentField === LABELS.UNIT
            ) {
              const instances = STORE.get("SELECT_INSTANCES_IN_SPREADSHEET");
              const target = instances.filter(
                (instance) => instance.displayBox.id === currentInput.id
              );
              target[0].show();
            } else {
              currentInput.removeAttribute("readonly");
              currentInput.focus();
            }

            // const dropdown = items.find(
            //   (item) =>
            //     item.rowIndex.toString() === currentRowIndex.toString() &&
            //     item.colIndex.toString() === currentColIndex.toString()
            // );
            // if (dropdown) {
            //   dropdown.instance.show();
            // }
          };

          const addNewRow = () => {
            // Add a new row with Shift + Enter



            const spreadsheet = document.getElementById(
              ELEMENT_IDS.MODAL.CONTENT[LABELS.DATABASE].id
            );

            const tableBody = spreadsheet.querySelector("tbody");

            const row = UI_COMPONENTS.generateRow(
              DEFAULT_CONFIG.SPREADSHEET.FIELDS,
              DEFAULT_CONFIG.SPREADSHEET.CELL_STYLE,
              rows.length
            );

            tableBody.append(row);
            // const lastRow = tableBody.querySelector("tr:last-child");
            // const slimSelects = lastRow.querySelectorAll(
            //   "[role='single-select']"
            // );

            // slimSelects.forEach((element, colIndex) => {
            //   UI_COMPONENTS.activateSlimSelect({
            //     store: INSTANCES,
            //     key: "SPREADSHEET_SLIMSELECT_CELLS",
            //     settings: {
            //       placeholderText: " ",
            //       focusSearch: true,
            //     },
            //     element,
            //     eventActions: {
            //       afterClose: () => {
            //         // STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
            //         // currentInput.setAttribute("readonly", true);
            //         enterNavigatingMode();
            //       },
            //       ...DEFAULT_CONFIG.ACTIONS.ORDER.action2,
            //     },
            //   });
            // });

            // const comboboxes = lastRow.querySelectorAll('[role="combobox"]');
            // UI_COMPONENTS.addStyleToSlimSelect({
            //   elements: comboboxes,
            //   style: [
            //     ...DEFAULT_CONFIG.SLIM_SELECT.STYLE.CLASSIC,
            //     "focus:ring-1",
            //     "focus:ring-blue-500",
            //   ],
            // });
          };

          switch (event.key) {
            case "Enter":
              if (event.shiftKey) {
                addNewRow();
              } else {
                if (state === LABELS.EDITING) {
                  if (currentCell.contains(event.target)) {
                    enterNavigatingMode();
                    navigateRight();
                  }
                } else {
                  enterEditingMode();
                }
              }

              break;

            case "ArrowUp":
              if (state === LABELS.NAVIGATING) {
                navigateUp();
              }
              break;
            case "ArrowDown":
              if (state === LABELS.NAVIGATING) {
                navigateDown();
              }
              break;
            case "ArrowLeft":
              if (state === LABELS.NAVIGATING) {
                console.log("state: ", state);
                navigateLeft();
              }

              break;
            case "ArrowRight":
              if (state === LABELS.NAVIGATING) {
                navigateRight();
              }

              break;
          }
        },
      };

      const LISTENERS = {
        attachEventListenerToTab: (tab) => {
          if (!tab) {
            console.error("Tab element not found");
            return;
          }

          tab.ELEMENT.addEventListener("click", (e) => {
            TAB.openTab(e, tab.NAME);
          });
        },

        attachEventListenerToOpenModal: (button, tab) => {
          if (button) {
            button.addEventListener("click", (param) => {
              FLOWBITE_MODAL.openModal(MODAL_TYPE.ADD_FORM, tab.NAME);
            });
          }
        },

        attachEventListenerToModalButtons: () => {
          let buttons = ELEMENT_IDS.MODAL.BUTTONS;

          Object.values(buttons).forEach((button) => {
            let buttonElement = document.getElementById(button.ID);
            if (button.ID === "post-modal-button") {
              buttonElement.addEventListener("click", (e) => {
                const param = e.currentTarget.getAttribute("data-form-type");
                SERVICES.postData(param);
              });
            } else {
              buttonElement.addEventListener("click", (e) => {
                FLOWBITE_MODAL.closeModal();
              });
            }
          });
        },

        attachEventListenerToFilterButton: () => {
          const tabs = ELEMENT_IDS.TABS;

          Object.values(tabs).forEach((table) => {
            const filterButton =
              table?.CONTENT?.TABLE?.BUTTONS?.FILTER?.ELEMENT;
            if (filterButton) {
              filterButton.addEventListener("click", (e) => {
                let activeTable = STORAGE.getActiveTable();
                let isActive = STORAGE.getFilterState(activeTable);

                // if (isActive) {
                //   STORAGE.setFilterState(false);
                // } else {
                //   STORAGE.setFilterState(true);
                // }
                FILTER_SIDEBAR.toggle(activeTable);
              });
            } else {
              console.error("Filter button not found");
            }
          });
        },

        attachEventListener: () => {
          const tabs = ELEMENT_IDS.TABS;

          if (!tabs) {
            console.error("TABS not found");
            return;
          }
          Object.values(tabs).forEach((tab) => {
            const buttons = tab?.CONTENT?.TABLE?.BUTTONS;
            const addButton = buttons?.ADD?.ELEMENT;
            const editButton = buttons?.EDIT?.ELEMENT;
            if (addButton) {
              LISTENERS.attachEventListenerToOpenModal(addButton, tab);
            }

            if (editButton) {
              LISTENERS.attachEventListenerToOpenModal(editButton, tab);
            }
            LISTENERS.attachEventListenerToTab(tab);
          });

          LISTENERS.attachEventListenerToFilterButton();
        },
      };

      const STORE = {
        save: ({ key, type = "string", value }) => {
          switch (type) {
            case "array":
              if (!STORE[key]) STORE[key] = [];
              STORE[key].push(value);
              break;
            case "object":
              if (!STORE[key]) STORE[key] = {};
              const newValue = Object.assign({}, value, STORE[key]);
              STORE[key] = newValue;
              break;
            default:
              STORE[key] = value;
              break;
          }
        },

        get: (key) => {
          if (STORE[key]) return STORE[key];
          console.error("STORE.get(): " + key + " is not found");
        },
      };
      const INSTANCES = {};

      const UTILITIES = {
        normalizeForSearch: (input) => {
          return input
            .toString() // Ensure input is a string
            .trim() // Remove extra spaces
            .toLowerCase() // Convert to lowercase
            .normalize("NFD") // Decompose Unicode characters (e.g., accents)
            .replace(/[\u0300-\u036f]/g, "") // Remove diacritics
            .replace(/[^\w\s]/g, "") // Optionally remove special characters (punctuation)
            .replace(/\s+/g, " "); // Normalize multiple spaces into a single space
        },

        formatDate: (value, type) => {
          switch (type) {
            case "YYYY-MM-DD":
              return value.toISOString().split("T")[0];
            default:
              break;
          }
        },

        formatNumberWithCommas: (value) => {
          // Remove any non-numeric characters
          const removedNonNumberCharValue = value
            .toString()
            .replace(/[^0-9]/g, "");

          // Format the number with commas
          return removedNonNumberCharValue.replace(
            /\B(?=(\d{3})+(?!\d))/g,
            ","
          );
        },

        parseNumber: (value) => {
          // Remove any non-numeric characters
          const removedNonNumberCharValue = value
            .toString()
            .replace(/[^0-9]/g, "");

          return removedNonNumberCharValue * 1;
        },

        setElementProperties: ({
          element,
          type = "text",
          id = "",
          classes = [],
          attribute = { name: "", value: "" },
        }) => {
          let cleanedUpClasses = UTILITIES.cleanArray(classes);
          if (cleanedUpClasses.length > 0) {
            element.classList.add(...cleanedUpClasses);
          }
          element.type = type;
          element.id = id;
          element.setAttribute(attribute.name, attribute.value);
        },

        isDataAvailable: (data) => {
          // return Object.keys(data).length === 0;
          return true;
        },

        /**
         * Logs errors with contextual information.
         * @param {"Type Error" | "Empty Value" | "Invalid Value" | "No Element" | "Unknown error"} error - The type of error.
         * @param {string} expectedType - The expected type of the value.
         * @param {*} value - The value to check.
         */
        logError: (error, expectedType, value) => {
          const errorLocation = new Error().stack.split("\n")[2].trim();
          const [filePath, lineColumn] = errorLocation
            .match(/\((.*):(\d+:\d+)\)/)
            .slice(1);

          switch (error) {
            case STATE.ERROR.TYPE.UNDEFINED:
              console.error(
                `${filePath}:${lineColumn} - TypeError: Data is undefined.`
              );
              break;
            case STATE.ERROR.TYPE.NULL:
              console.error(
                `${filePath}:${lineColumn} - TypeError: Data is null.`
              );
              break;
            case STATE.ERROR.TYPE.MISMATCH:
              console.error(
                `${filePath}:${lineColumn} - TypeError: Expected ${expectedType}, but received ${typeof value}.`
              );
              break;
            case STATE.ERROR.VALUE.EMPTY:
              console.warn(
                `${filePath}:${lineColumn} - Warning: Received an empty ${typeof value}.`
              );
              break;
            case STATE.ERROR.VALUE.INVALID:
              console.error(`${filePath}:${lineColumn} - Error: Invalid value`);
              break;
            case STATE.ERROR.ELEMENT.NOT_FOUND:
              console.error("${filePath}:${lineColumn} - Element not found");
              break;
            default:
              console.error(`${filePath}:${lineColumn} - Unknown error`);
              break;
          }
        },

        isObject: (data) => {
          if (typeof data !== "object") {
            // logError(STATUS.ERROR.TYPE.MISMATCH, "object", typeof data);
            return false;
          }

          return true;
        },

        isObjectEmpty: (data) => {
          if (Object.values(data).length !== 0) {
            return false;
          }

          return true;
        },

        isArray: (data) => {
          if (!Array.isArray(data)) {
            logError("Type Error", "array", typeof data);
            return false;
          }

          return true;
        },

        isArrayEmpty: (data) => {
          if (data.length !== 0) {
            logError("Empty Value", "array", typeof data);
            return false;
          }

          return true;
        },

        isString: (data) => {
          if (typeof data !== "string") {
            logError("Type Error", "string", typeof data);
            return false;
          }
          return true;
        },

        isStringEmpty: (data) => {
          if (data.length === 0) {
            console.warn("Warning: data is empty");
            return true;
          }

          return false;
        },

        isUndefined: (value) => {
          let result = value === undefined;
          if (result) {
            logError("Type Error", null, typeof data);
          }
          return result;
        },

        isNull: (value) => {
          let result = value === null;
          if (result) {
            logError("Type Error", null, typeof data);
          }
          return result;
        },

        stringGuardClause: (data) => {
          if (isNull(data) || isUndefined(data) || isString(data)) {
            return true;
          }
          return false;
        },

        arrayGuardClause: (data) => {
          if (isNull(data) || isUndefined(data) || isArray(data)) {
            return true;
          }
          return false;
        },

        objectGuardClause: (data) => {
          if (isNull(data) || isUndefined(data) || isObject(data)) {
            return true;
          }
          return false;
        },

        convertISOToDMY: (isoDate) => {
          if (!isoDate) return ""; // If no date is provided, return an empty string

          const [year, month, day] = isoDate.split("-");

          // Return the date in 'DD/MM/YYYY' format
          return `${day}/${month}/${year}`;
        },

        cleanArray: (param) => {
          if (Array.isArray(param)) {
            return param.filter(
              (value) => value !== "" && value !== null && value !== undefined
            );
          } else {
            console.error("The provided parameter is not an array.");
            return null;
          }
        },

        generateRandomId: (length = 10) => {
          // Step 1: Define the character set
          const characters =
            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
          const charactersLength = characters.length;

          // Step 2: Initialize an empty array for the ID
          let randomId = "";

          // Step 3: Loop through to generate each character of the ID
          for (let i = 0; i < length; i++) {
            // Step 4: Randomly select a character and append it to the ID
            randomId += characters.charAt(
              Math.floor(Math.random() * charactersLength)
            );
          }

          // Step 5: Return the generated ID
          return randomId;
        },

        generateFilterFieldId: (table, field) => {
          return `${table}-filter-${field}-field`;
        },

        generateModalFieldId: (table, field) => {
          return `${table}-modal-${field}-field`;
        },

        generateMultipleSelectId: (table, field) => {
          return `${table}-${field}-multiple-select`;
        },

        generateDropdownInputElementIds: (tableName, field) => {
          let inputId = `${tableName}-filter-${field}-input`;
          let dropdownId = `${tableName}-filter-${field}-dropdown`;
          let dropdownButtonId = `${tableName}-filter-${field}-dropdown-button`;

          return [inputId, dropdownId, dropdownButtonId];
        },

        getCurrentDate: () => {
          // Create a new Date object for the current date and time
          const today = new Date();

          // Get the day, month, and year
          let day = today.getDate(); // Returns the day of the month (1-31)
          let month = today.getMonth() + 1; // Returns the month (0-11), so we add 1 to get 1-12
          let year = today.getFullYear(); // Returns the 4-digit year

          // Ensure day and month are two digits by adding leading zeros if necessary
          day = day < 10 ? "0" + day : day;
          month = month < 10 ? "0" + month : month;

          // Format the date as DD/MM/YYYY
          return `${day}/${month}/${year}`;
        },
      };

      function observeMutations() {
        const modalElement = ELEMENT_IDS.MODAL.CONTAINER;
        // const filterElement = ELEMENT_IDS.DROPDOWN.FILTER.TARGET_CONTENT_ELEMENT;
        if (modalElement) {
          const modalObserver = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
              if (mutation.addedNodes.length) {
                LISTENERS.attachEventListenerToModalButtons();
              }
            });
          });
          modalObserver.observe(modalElement, {
            childList: true,
            subtree: true,
          });
        } else {
          console.error("Modal element not found");
        }
      }

      // function activateSlimSelect() {
      //   currentMultipleSelect = new SlimSelect({
      //     select: "#customer-multiple-select",
      //     settings: {
      //       closeOnSelect: false,
      //     },
      //   });
      //   // Add a specific class to elements to be ignored by Flowbite
      //   const slimSelectDropdown = document.querySelector(".ss-list");
      //   if (slimSelectDropdown) {
      //     slimSelectDropdown.classList.add("multiple-select");
      //   }
      // }

      // function destroyMultipleSelect() {
      //   if (currentMultipleSelect) {
      //     currentMultipleSelect.destroy();
      //   }
      // }

      function saveNewItemDetailsToMemory(param) {}

      function destroyAllMultipleSelect() {
        const activeTable = STORAGE.getActiveTab();
        if (INSTANCES.FILTER[activeTable]) {
          Object.keys(INSTANCES.FILTER[activeTable]).forEach((field) => {
            UI_COMPONENTS.destroyMultipleSelect(activeTable, field);
          });
        }
      }

      function updateFilterCondition(field, condition) {
        const activeTable = STORAGE.getActiveTable();
        let filterData = STORAGE.getFilterFieldsByTable(activeTable);
        filterData[field] = {
          ...filterData[field],
          condition: condition,
          name: field,
        };
        STORAGE.setFilterFieldsByTable(activeTable, filterData);
      }

      function changeButtonLabel(buttonId, label) {
        const dropdownButton = document.getElementById(buttonId);
        dropdownButton.innerText = label;
      }

      function formatDateWithLuxon(dateString) {
        const { DateTime } = luxon;
        const date = DateTime.fromJSDate(new Date(dateString)); // Convert to Luxon DateTime
        const formattedDate = date.setLocale("fr").toFormat("dd-MM-yyyy"); // Format the date
        return formattedDate;
      }

      function disableButton(element) {
        element.disabled = true;
      }

      function enableButton(element) {
        element.disabled = false;
      }

      function getDataByColumn(data, column) {
        try {
          const rowData = data.rows;
          let names = [];
          rowData.forEach((row) => {
            if (row.hasOwnProperty(column)) {
              let value = row[column];
              names.push(value);
            }
          });

          return names;
        } catch (e) {
          console.error(e);
          return;
        }
      }

      // function createTextarea(title, value, formType, tableName) {
      //   return `
      //                                         <div class="mb-2">${title}</div>
      //                                         <textarea
      //                                             name="${title}"
      //                                             class="h-[6.6em] bg-gray-50 border border-[#ccc] text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:ring-2 block w-full p-2.5"
      //                                             placeholder=""
      //                                             onInput="handleAddFormInput(event,'${formType}','${tableName}')"
      //                                         >${value}</textarea>
      //                                       `;
      // }

      // function createInput(title, value, formType, tableName) {
      //   return `
      //                                           <div class="mb-2">${title}</div>
      //                                           <input
      //                                               type="text"
      //                                               value="${value}"
      //                                               name="${title}"
      //                                               class="bg-gray-50 border border-[#ccc] text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:ring-2 block w-full p-2.5"
      //                                               placeholder=""
      //                                               onInput="handleAddFormInput(event,'${formType}','${tableName}')"
      //                                           />
      //                                         `;
      // }

      // function createSelectInput(id, classNames, title, options) {
      //   return `
      //                                         <div class="mb-2">${title}</div>
      //                                         <select class="${
      //                                           DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD
      //                                         } flex flex-row" id="${id}" multiple role="multiple-select">
      //                                           ${options
      //                                             .map((item) => {
      //                                               return `<option value="${item}">${item}</option>`;
      //                                             })
      //                                             .join("")}
      //                                         </select>
      //                                       `;
      // }

      // function createButton(id, classNames, content) {
      //   // Define default styles
      //   // const defaultStyle = `text-gray-900 bg-white border border-[#ccc] focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2`;

      //   // Validate and process input parameters
      //   if (!stringGuardClause(id)) {
      //     return null;
      //   }

      //   if (!arrayGuardClause(classNames)) {
      //     return null;
      //   }

      //   const buttonId = isStringEmpty(id) ? "" : id;
      //   const buttonClasses = isArrayEmpty(classNames)
      //     ? DEFAULT_CONFIG.STYLE.BUTTON
      //     : `${classNames.join(" ")} ${DEFAULT_CONFIG.STYLE.BUTTON}`;
      //   const buttonContent = isStringEmpty(content) ? "button" : content;

      //   // Create button element
      //   const button = document.createElement("button");

      //   // Set properties
      //   button.id = buttonId;
      //   button.className = buttonClasses; // Use className instead of classList.add for all classes
      //   button.innerHTML = buttonContent;

      //   return button;
      // }

      // function createDropdownInput(
      //   id,
      //   classNames,
      //   title,
      //   dropdownElements,
      //   action
      // ) {
      //   const activeTable = STORAGE.getActiveTable();
      //   const filterFields = STORAGE.getFilterFieldsByTable(activeTable);
      //   const [inputId, dropdownId, dropdownButtonId] =
      //     generateDropdownInputElementIds(activeTable, title);
      //   setFilterFieldId(activeTable, title, [
      //     inputId,
      //     dropdownId,
      //     dropdownButtonId,
      //   ]);
      //   const selectedCondition = filterFields?.condition || "Chọn điều kiện";
      //   return `
      //           <form class="max-w-md">
      //             <div class="flex flex-col relative">
      //               <label for="${inputId}" class="mb-2 text-sm font-medium text-gray-900">${title}</label>
      //               <div class="flex flex-row relative">
      //                 <button onclick="${action}(event, '${dropdownId}')" id="${dropdownButtonId}" class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-e-0 border-[#ccc] rounded-s-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-300 " type="button">
      //                   ${selectedCondition}
      //                   <svg class="w-2.5 h-2.5 ms-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
      //                     <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"/>
      //                   </svg>
      //                 </button>
      //                 <div id="${dropdownId}" class="dropdown-input hidden">
      //                   <ul class="py-2 text-sm text-gray-700">
      //                     ${dropdownElements
      //                       .map((element) => {
      //                         return `
      //                           <li>
      //                             <div
      //                               onclick="handleFilterDropdownClick(event, '${title}', '${element}', '${dropdownId}','${dropdownButtonId}')"
      //                               value="${element}"
      //                               class="block px-4 py-2 hover:bg-gray-100">
      //                               ${element}
      //                             </div>
      //                           </li>`;
      //                       })
      //                       .join("")}
      //                   </ul>
      //                 </div>
      //                 <div class="relative w-full">
      //                   <input type="search" oninput="handleFilterInputFieldChange(event, '${title}')" id="${inputId}" class="block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-e-lg rounded-s-gray-100 rounded-s-2 border border-[#ccc] focus:ring-blue-500 focus:ring-2" placeholder="" />
      //                 </div>
      //               </div>
      //             </div>
      //           </form>`;
      // }

      function setDefaultDropdownItem(field, buttonId) {
        updateFilterCondition(field, DEFAULT_CONFIG.INITIAL_OPERATOR);
        changeButtonLabel(buttonId, DEFAULT_CONFIG.INITIAL_OPERATOR);
      }

      function setFilterFieldId(key, field, ids = {}) {
        // Initialize field object if it doesn't exist
        if (!ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[key]) {
          ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[key] = {};
        }
        if (!ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[key][field]) {
          ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[key][field] = {};
        }

        Object.entries(ids).forEach(([idKey, idValue]) => {
          ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[key][field][idKey] =
            idValue;
        });
      }

      function getFilterFieldIds(table, field) {
        return ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[table][field];
      }

      function toggleDropdown(event, dropdownId) {
        let dropdown = document.getElementById(dropdownId);
        if (!dropdown) {
          logError("No Element");
          return;
        }
        dropdown.classList.toggle("active");
        // if (dropdown.classList.contains("hidden")) {
        //   dropdown.classList.remove("hidden");
        // } else {
        //   dropdown.classList.add("hidden");
        // }
      }

      // function showElement(element) {
      //   // Force reflow
      //   element.style.transition = "none";
      //   element.offsetHeight; // Trigger a reflow, flushing the CSS changes
      //   element.style.transition = "";

      //   element.classList.add("active");
      // }

      // function hideElement(element) {
      //   // Force reflow
      //   element.style.transition = "none";
      //   element.offsetHeight; // Trigger a reflow, flushing the CSS changes
      //   element.style.transition = "";

      //   element.classList.remove("active");
      // }

      function autoCompleteCustomerInfoFields(data) {}

      const TAB = {
        getData: async (table) => {
          let data;
          let storedData = STORAGE.getData(table);
          if (storedData && storedData.rows.length !== 0) {
            data = storedData;
          } else {
            data = await SERVICES.fetchData(table);

            // await DATABASE.save(table, data.rows);
            STORAGE.setDataByTable(table, data);
          }

          return data;
        },

        getTabElement: (key) => {
          return ELEMENT_IDS.TABS[key];
        },

        // Example of refactoring repetitive tasks
        activateTab: (tabElement) => {
          tabElement.classList.add("active");
          // tabElement.setAttribute("aria-selected", "true");
        },

        deactivateTab: (tabElement) => {
          tabElement.forEach((element) => {
            element.classList.remove("active");
            // element.setAttribute("aria-selected", "false");
          });
        },

        showTabContent: (tabContent) => {
          // Check if the tabContent exists
          if (tabContent) {
            tabContent.classList.add("active");
          } else {
            console.error("Tab content not found.");
          }
        },

        hideAllTabContents: (tabContents) => {
          tabContents.forEach((content) => {
            content.classList.remove("active");
          });
        },

        openTab: async (e, key) => {
          let tabLinks, tabContents, tableData;

          tabContents = document.querySelectorAll("[role='tabpanel']");
          TAB.hideAllTabContents(tabContents);

          tabLinks = document.querySelectorAll("[role='tab']");
          TAB.deactivateTab(tabLinks);

          tabContents = ELEMENT_IDS.TABS[key]?.CONTENT?.ELEMENT;
          if (tabContents) {
            TAB.showTabContent(tabContents);
          }

          TAB.activateTab(e.currentTarget);
          STORAGE.setActiveTab(key);
          STORAGE.clearFilterFieldsByTable(key);
          FILTER_SIDEBAR.hide();

          if (key !== "dashboard") {
            const tableData = await TAB.getData(key);
            customTable.initializeTable(key, tableData);
          }
        },
      };

      class CustomTable {
        constructor(element) {
          this.element = element;
        }

        getTableConfig(key) {
          return ELEMENT_IDS.TABS[key]?.CONTENT?.TABLE;
        }

        destroyTable(table) {
          if (table) {
            table.destroy();
            // tableElement.innerHTML = "";
          }
        }

        initializeTable(key, tableData) {
          if (UTILITIES.isDataAvailable(tableData)) {
            const tableConfig = this.getTableConfig(key);
            const tableElement = tableConfig.ELEMENT;
            const tableId = tableConfig.ID;
            const tableName = key;
            const editButton = tableConfig.BUTTONS.EDIT;
            const columnConfig = DEFAULT_CONFIG.TABLE.COLUMN.DATA[key];

            // Destroy table if available
            this.destroyTable(table);

            table = new Tabulator(`#${tableId}`, {
              data: tableData.rows,
              pagination: "local",
              paginationSize: pageSize,
              paginationSizeSelector: [10, 20, 30, 40, 50],
              layout: "fitDataStretch",
              selectableRows: true,
              columnDefaults: {
                headerSort: true,
                headerHozAlign: "center",
                resizable: "header",
                width: 100,
              },
              columns: columnConfig,
            });

            STORAGE.setActiveTable(key);

            if (table) {
              table.on("rowDeselected", (row) => {
                disableButton(editButton);
              });
              table.on("rowSelected", (row) => {
                //row - row component for the selected ro

                // Deselect the previously selected row
                if (currentRow !== row) {
                  table.deselectRow(currentRow);
                }

                // Set the current row to the newly selected row
                currentRow = row;
                let rowPosition = row.getPosition();
                let rowData = row.getData();
                let selectedRowData = {
                  table: tableName || "",
                  rows: rowData,
                  columns: data.columns, // Extract headers correctly
                  position: rowPosition,
                };

                enableButton(editButton);
                STORAGE.setSelectedItem(selectedRowData);
              });
            } else {
              console.error("No data to initialize table");
            }
          }
        }
      }

      const FLOWBITE_MODAL = {
        // constructor(config) {
        //   this.modalElement = config.ELEMENT;
        //   this.modal = new Modal(this.modalElement, {
        //     placement: "center",
        //   });
        //   this.modalHeader = config.CONTENT.HEADER_ELEMENT;
        //   this.modalBody = config.CONTENT.BODY_ELEMENT;
        //   this.modalFooter = config.CONTENT.FOOTER_ELEMENT;
        // }

        // activate: () => {
        //   const id = ELEMENT_IDS.MODAL.ID;
        //   const element = document.getElementById(id);
        //   if (!INSTANCES.MODAL) {
        //     INSTANCES.MODAL = {};
        //   }

        //   INSTANCES.MODAL = new Modal(element, {
        //     placement: "center",
        //   });
        // },

        createOrderSummary: () => {
          const customerInfo = STORAGE.getNewItemCustomerInfo();
          const orderInfo = STORAGE.getNewItemOrderInfo();

          const customerName = customerInfo[LABELS.CUSTOMER];
          const orderId = orderInfo[LABELS.ORDER_NUMBER];
          const orderDate = orderInfo[LABELS.RECEIVING_DATE];
          const orderGoods = orderInfo[LABELS.GOODS];
          const orderStatus = orderInfo[LABELS.STATUS];

          return {
            [LABELS.RECEIVING_DATE]: orderDate,
            [LABELS.ORDER_NUMBER]: orderId,
            [LABELS.GOODS]: orderGoods,
            [LABELS.CUSTOMER]: customerName,
            [LABELS.STATUS]: orderStatus,
          };
        },

        createOrderDetail: () => {
          const customerInfo = STORAGE.getNewItemCustomerInfo();
          const orderInfo = STORAGE.getNewItemOrderInfo();
          const itemList = STORAGE.getNewItemOrderInfo();
          const orderDetail = [];

          itemList.forEach((item) => {
            const newData = {
              ...item,
              [LABELS.ORDER_NUMBER]: orderInfo[LABELS.ORDER_NUMBER],
              [LABELS.RECEIVING_DATE]: orderInfo[LABELS.RECEIVING_DATE],
              [LABELS.SHIPPING_DATE]: orderInfo[LABELS.SHIPPING_DATE],
              // [LABELS.CUSTOMER_ID]: customerInfo[LABELS.CUSTOMER_ID],
              [LABELS.CUSTOMER]: customerInfo[LABELS.CUSTOMER],
            };

            orderDetail.push(newData);
          });

          return orderDetail;
        },

        getHeaderElement: () => {
          const id = ELEMENT_IDS.MODAL.HEADER_ID;
          return document.getElementById(id);
        },

        getBodyElement: () => {
          const id = ELEMENT_IDS.MODAL.BODY_ID;
          return document.getElementById(id);
        },

        getFooterElement: () => {
          const id = ELEMENT_IDS.MODAL.FOOTER_ID;
          return document.getElementById(id);
        },

        generateModal: (modalType, tableName) => {
          FLOWBITE_MODAL.generateHeader(modalType);
          FLOWBITE_MODAL.generateContent(modalType, tableName);
          FLOWBITE_MODAL.generateFooter(modalType);
        },

        generateHeader: (modalType) => {
          const content = document.createElement("div");
          const header = FLOWBITE_MODAL.getHeaderElement();
          header.innerHTML = "";
          content.classList.add(
            "flex",
            "items-center",
            "justify-between",
            "p-3",
            "border-b",
            "rounded-t"
          );

          content.innerHTML = `
                                                                                  <h3 class="text-xl font-semibold text-gray-900">Thêm dữ liệu</h3>
                                                                                  <button
                                                                                    id="close-modal-button"
                                                                                    type="button"
                                                                                    class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
                                                                                    data-modal-hide="modal">
                                                                                    <svg
                                                                                      class="w-3 h-3"
                                                                                      aria-hidden="true"
                                                                                      xmlns="http://www.w3.org/2000/svg"
                                                                                      fill="none"
                                                                                      viewBox="0 0 14 14">
                                                                                      <path
                                                                                        stroke="currentColor"
                                                                                        stroke-linecap="round"
                                                                                        stroke-linejoin="round"
                                                                                        stroke-width="2"
                                                                                        d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                                                                                    </svg>
                                                                                    <span class="sr-only">Close modal</span>
                                                                                  </button>`;

          header.appendChild(content);
        },

        // createContentContainer: () => {
        //   const wrapper = document.createElement("div");
        //   const left = document.createElement("div");
        //   const right = document.createElement("div");

        //   return { wrapper, left, right };
        // },

        // createImageUpload: (title) => {
        //   return [UI_COMPONENTS.createFileInput({ label: title })].join("");
        // },

        // applyFormLayout: (layout, data) => {
        //   switch (layout) {
        //     case "CLASSIC":
        //       data.forEach((field) => {
        //         if (field) {
        //           field.classList.add("flex", "flex-row", "gap-4", "mb-4");
        //           const children = field.children; // This will give you an HTMLCollection of the child elements

        //           // Ensure there are at least two child elements before modifying them
        //           if (children.length >= 2) {
        //             // Apply classes to the first child element (20% width)
        //             children[0].classList.remove("mb-2");
        //             children[0].classList.add(
        //               "basis-1/5",
        //               "flex-none",
        //               "text-right"
        //             );

        //             // Apply classes to the second child element (remaining 80% width)
        //             children[1].classList.add("flex-grow");
        //           }
        //         }
        //       });
        //       return data;
        //     default:
        //       return data;
        //   }
        // },

        // addStyleToSlimSelect: ({ elements, table, style }) => {
        //   elements.forEach((element, index) => {
        //     element.classList.add(...style);
        //     element.addEventListener("click", (event) => {
        //       element.focus();
        //     });
        //   });
        // },

        // activateSlimSelectElements: ({
        //   table,
        //   container,
        //   multiple = false,
        // }) => {
        //   let element;

        //   if (!container) {
        //     return console.error("Element not found");
        //   }

        //   if (multiple) {
        //     elements = container.querySelectorAll('[role="multiple-select"]');
        //   } else {
        //     elements = container.querySelectorAll('[role="single-select"]');
        //   }

        //   switch (table) {
        //     case LABELS.ORDER_SUMMARY:
        //       elements.forEach((element, index) => {
        //         UI_COMPONENTS.activateSlimSelect({
        //           store: INSTANCES.MODAL,
        //           comboboxStyle: ["h-[30px]", "min-h-[30px]"],
        //           settings: {
        //             placeholderText: " ",
        //           },
        //           element,
        //           field: "",
        //         });
        //       });
        //       break;

        //     default:
        //       elements.forEach((element) => {
        //         UI_COMPONENTS.activateSlimSelect({
        //           store: INSTANCES.MODAL,
        //           settings: {
        //             placeholderText: " ",
        //           },
        //           element,
        //           field: "",
        //         });
        //       });
        //       break;
        //   }
        // },

        generateFields: ({ title, handler, value, exclude = [] }) => {
          if (title === LABELS.NOTE && !exclude.includes(title)) {
            return UI_COMPONENTS.createTextarea({
              title,
              value,
              action: handler,
            });
          }
          if (title === LABELS.NAME && !exclude.includes(title)) {
            const activeTable = STORAGE.getActiveTable();
            return UI_COMPONENTS.createNameField({
              title,
              action: "HANDLERS.handleAddFormInput",
            });
          }

          if (title === LABELS.CUSTOMER && !exclude.includes(title)) {
            return UI_COMPONENTS.createCustomerField({
              title,
              action: "HANDLERS.handleAddFormInput",
            });
          }

          if (title === LABELS.PRODUCT && !exclude.includes(title)) {
            return UI_COMPONENTS.createProductField({
              title,
              multipleSelect: true,
            });
          }

          if (title === LABELS.QUANTITY && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: handler,
              type: "number",
            });
          }

          if (title === LABELS.UNIT_COST && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: handler,
              type: "number",
            });
          }

          if (title === LABELS.UNIT && !exclude.includes(title)) {
            return UI_COMPONENTS.createUnitField({
              title,
              action: "HANDLERS.handleAddFormInput",
            });
          }

          if (title === LABELS.IMAGE && !exclude.includes(title)) {
            return null;
          }

          if (title === LABELS.COLLECT && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: handler,
              type: "number",
            });
          }

          if (title === LABELS.STATUS && !exclude.includes(title)) {
            return UI_COMPONENTS.createStatusField({
              title,
              action: "HANDLERS.handleAddFormInput",
            });
          }

          if (title === LABELS.PHONE_NUMBER && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: "HANDLERS.handleAddFormInput",
              type: "number",
            });
          }
          if (title === LABELS.ADDRESS && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: "HANDLERS.handleAddFormInput",
            });
          }
          if (title === LABELS.TYPE && !exclude.includes(title)) {
            return UI_COMPONENTS.createSelectInput({
              id: UTILITIES.generateRandomId(21),
              title,
              action: "HANDLERS.handleAddFormInput",
              options: ["Xi", "Kẽm"],
            });
          }

          return null;
          // return UI_COMPONENTS.createEmptyDiv();
          // return UI_COMPONENTS.createInput({
          //   title,
          //   action: handler,
          // });
        },

        generateCustomerInfoGroup: () => {
          const fields = [
            // LABELS.CUSTOMER_ID,
            LABELS.CUSTOMER,
            LABELS.ADDRESS,
            LABELS.PHONE_NUMBER,
            LABELS.DESCRIPTION,
          ];

          const customerInfo = document.createElement("div");
          customerInfo.className =
            "col-span-6 row-span-2 flex flex-col gap-4 p-5 border border-[#aaa] relative mt-4 mb-4";
          customerInfo.innerHTML =
            "<div class='absolute top-[-16px] left-[16px] bg-white p-1 font-bold text-sm'>Thông tin</div>";

          let inputField, randomId, component, fieldStyle;

          fieldStyle = {
            container: "flex gap-3",
            title: "w-1/3 !text-sm !m-0 text-left",
            input:
            `${DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD} h-[30px] !text-xs`,

          };

          for (const field of fields) {
            randomId = UTILITIES.generateRandomId(21);
            ELEMENT_IDS.MODAL.saveId(field, randomId);

            switch (field) {
              case LABELS.CUSTOMER:
                component = UI_COMPONENTS.createSelectField({
                  title: field,
                  style: {
                    ...fieldStyle,
                    select: "h-[30px] !text-xs",
                    displaybox: `${DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD} h-full !text-xs`,
                  },
                });

                STORE.save({
                  key: "SELECT_INSTANCES_IN_CUSTOMER_INFO_GROUP",
                  type: "array",
                  value: new CustomSelect(
                    component.select.querySelector("[role='displaybox']"),
                    {
                      data: STORAGE.getCustomerList(),
                      afterChange: (selectionDetails) => {
                        const customerName = selectionDetails.value;
                        // Fetch customer info based on the name
                        const customerInfo =
                          STORAGE.getCustomerInfoByName(customerName);
                        const {
                          [LABELS.CUSTOMER_ID]: customerId,
                          [LABELS.ADDRESS]: address,
                          [LABELS.PHONE_NUMBER]: phoneNumber,
                        } = customerInfo[0];

                        // Get field IDs from the element IDs map
                        const {
                          [LABELS.CUSTOMER_ID]: customerIdFieldId,
                          [LABELS.ADDRESS]: addressFieldId,
                          [LABELS.PHONE_NUMBER]: phoneNumberFieldId,
                        } = ELEMENT_IDS.MODAL.CONTENT;

                        // Set values to corresponding fields
                        UI_COMPONENTS.setValueToFieldById(
                          customerIdFieldId,
                          customerId
                        );
                        UI_COMPONENTS.setValueToFieldById(
                          addressFieldId,
                          address
                        );
                        UI_COMPONENTS.setValueToFieldById(
                          phoneNumberFieldId,
                          phoneNumber
                        );

                        // Store the customer details in sessionStorage
                        STORAGE.setNewItemCustomerInfo({
                          [LABELS.CUSTOMER_ID]: customerId,
                          [LABELS.CUSTOMER]: customerName,
                          [LABELS.ADDRESS]: address,
                          [LABELS.PHONE_NUMBER]: phoneNumber,
                        });
                      },
                    }
                  ),
                });

                inputField = component.container;

                break;
              case LABELS.DESCRIPTION:
                inputField = UI_COMPONENTS.createTextarea({
                  id: { textarea: randomId },
                  title: field,
                  style: {
                    ...fieldStyle,
                    textarea:
                      `${DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD} min-h-[80px] !text-xs`,
                  },
                  onInput: HANDLERS.saveCustomerInfoToSessionStorage,
                });
                break;
              default:
                component = UI_COMPONENTS.createInputField({
                  id: { input: randomId },
                  style: fieldStyle,
                  label: field,
                  type: field === LABELS.PHONE_NUMBER ? "tel" : "text",
                  onInput: HANDLERS.saveCustomerInfoToSessionStorage,
                });
                inputField = component.container;

                break;
            }

            customerInfo.append(inputField);
          }

          return customerInfo;
        },

        generateOrderInfoGroup: (param) => {
          const generateValue = (field) => {
            if (field === LABELS.ORDER_NUMBER) {
              return UTILITIES.generateRandomId();
            } else if (field === LABELS.RECEIVING_DATE) {
              // Get today's date
              const today = new Date();
              // Format the date as YYYY-MM-DD
              return today.toISOString().split("T")[0];
            } else {
              return "";
            }
          };

          const fields = [
            LABELS.ORDER_NUMBER,
            LABELS.RECEIVING_DATE,
            LABELS.SHIPPING_DATE,
            LABELS.GOODS,
            LABELS.PAYMENT,
            LABELS.STATUS,
          ];

          const fieldStyle = {
            container: "flex gap-3",
            title: "w-[43.3333%] !text-sm !m-0 text-left",
            input:
              DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD + " h-[30px] !text-xs",
          };

          const orderInfo = document.createElement("div");
          orderInfo.className = `
                          col-span-4
                          row-span-2
                          gap-4
                          flex
                          flex-col
                          p-5
                          relative
                          border
                          border-[#aaa]
                          mt-4
                          mb-4
                          ml-4
                        `.trim(); // `.trim()` removes any unwanted whitespace
          orderInfo.innerHTML =
            "<div class='absolute top-[-16px] left-[16px] bg-white p-1 font-bold text-sm'>Đơn hàng</div>";

          let elementId, component;

          fields.forEach((field) => {
            elementId = UTILITIES.generateRandomId(21);
            ELEMENT_IDS.MODAL.saveId(field, elementId);

            if (field === LABELS.PAYMENT) {
              orderInfo.append(
                UI_COMPONENTS.createRadioField({
                  id: elementId,
                  attribute: {
                    name: LABELS.PAYMENT,
                  },
                  title: LABELS.PAYMENT,
                  options: DEFAULT_CONFIG.PAYMENT_OPTIONS,
                  style: {
                    container:
                      "flex flex-row gap-1 items-center justify-start ",
                    title: "!m-0 w-1/3 text-sm cursor-pointer",
                    radioTitle: "text-xs !m-0",
                    input: "rounded-full cursor-pointer",
                  },
                  onClick: (e) => {
                    if (e.target.checked) {
                      STORAGE.setNewItemOrderInfo({ [field]: e.target.value });
                    }
                  },
                })
              );
            } else if (field === LABELS.GOODS || field === LABELS.STATUS) {
              component = UI_COMPONENTS.createSelectField({
                style: {
                  ...fieldStyle,
                  select: "h-[30px] !text-xs",
                  displaybox: `${DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD} text-xs`,
                },
                title: field,
              });
              STORE.save({
                key: "SELECT_INSTANCES_IN_ORDER_INFO_GROUP",
                type: "array",
                value: new CustomSelect(
                  component.select.querySelector('[role="displaybox"]'),
                  {
                    data:
                      field === LABELS.GOODS
                        ? DEFAULT_CONFIG.TYPE_OPTIONS
                        : DEFAULT_CONFIG.STATUS_OPTIONS,
                    afterChange: (selectionDetails) => {
                      // HANDLERS.saveCustomerDetailsToSessionStorage(selectionDetails);
                      STORAGE.setNewItemOrderInfo({
                        [field]: selectionDetails.value,
                      });
                    },
                  }
                ),
              });

              orderInfo.append(component.container);
            } else {
              let value = generateValue(field);
              STORAGE.setNewItemOrderInfo({ [field]: value });

              component = UI_COMPONENTS.createInputField({
                id: {
                  input: elementId,
                },
                style: fieldStyle,
                label: field,
                onInput: (e) => {
                  STORAGE.setNewItemOrderInfo({ [field]: e.target.value });
                },
                value,
                type:
                  field === LABELS.RECEIVING_DATE ||
                  field === LABELS.SHIPPING_DATE
                    ? "date"
                    : "text",
              });
              orderInfo.append(component.container);
            }
          });

          return orderInfo;
        },

        generateSpreadsheetGroup: () => {
          const tableContainer = document.createElement("div");

          tableContainer.classList.add(
            "col-span-10",
            "row-span-2",
            "overflow-auto",
            "border",
            "border-[#ccc]"
          );

          tableContainer.id = UTILITIES.generateRandomId(21);

          const spreadsheet = UI_COMPONENTS.generateSpreadsheetTable(
            tableContainer.id
          );

          tableContainer.append(spreadsheet);

          return tableContainer;
        },

        generateSummaryGroup: () => {
          let label, number, id;
          const summary = document.createElement("div");
          summary.classList.add(
            "w-full",
            "flex",
            "flex-col",
            "items-end",
            "col-span-10",
            "row-span-2",
            "gap-1",
            "justify-center",
            "p-2"
          );

          const totalAmount = document.createElement("div");
          id = UTILITIES.generateRandomId(10);
          totalAmount.id = id;
          ELEMENT_IDS.MODAL.saveId(LABELS.TOTAL_AMOUNT, id);
          totalAmount.classList.add("flex", "flex-row");
          label = document.createElement("label");
          label.classList.add("w-[100px]", "text-right", "font-bold");
          label.innerText = "Tổng tiền: ";
          number = document.createElement("p");
          number.classList.add("w-[100px]", "text-right");
          number.innerText = "0";

          totalAmount.append(label);
          totalAmount.append(number);
          summary.append(totalAmount);

          return summary;
        },

        generateOrderAddForm: (fields) => {
          const container = document.createElement("div");

          container.className = "w-full h-full grid grid-cols-10";
          container.append(FLOWBITE_MODAL.generateCustomerInfoGroup());
          container.append(FLOWBITE_MODAL.generateOrderInfoGroup());
          container.append(FLOWBITE_MODAL.generateSpreadsheetGroup());
          container.append(FLOWBITE_MODAL.generateSummaryGroup());

          return container;
        },

        generateCustomerContent: ({ type, fields }) => {
          const content = [];

          switch (type) {
            case MODAL_TYPE.ADD_FORM:
              fields.forEach((field) => {
                content.push(
                  FLOWBITE_MODAL.generateFields({
                    title: field,
                    handler: "HANDLERS.handleAddFormInput",
                    exclude: [LABELS.IMAGE, LABELS.PRODUCTION],
                  })
                );
              });

              return content;
            case MODAL_TYPE.EDIT_FORM:
              const selectedRowData = STORAGE.getSelectedItem().rows;
              fields.forEach((field) => {
                const value = selectedRowData[field] || "";
                content.push(
                  FLOWBITE_MODAL.generateFields({
                    title: field,
                    value,
                    handler: "HANDLERS.handleEditFormInput",
                    exclude: [LABELS.IMAGE],
                  })
                );
                return content.join(" ");
              });
            default:
              break;
          }
        },

        generateOrderContent: ({ type, fields }) => {
          switch (type) {
            case MODAL_TYPE.ADD_FORM:
              return FLOWBITE_MODAL.generateOrderAddForm(fields);
            case MODAL_TYPE.EDIT_FORM:
            default:
              break;
          }
        },

        generateProductionContent: ({ type, fields }) => {
          const content = [];

          switch (type) {
            case MODAL_TYPE.ADD_FORM:
              fields.forEach((field) => {
                content.push(
                  FLOWBITE_MODAL.generateFields({
                    title: field,
                    handler: "HANDLERS.handleAddFormInput",
                    exclude: [LABELS.IMAGE, LABELS.PRODUCTION],
                  })
                );
              });

              return content;
            case MODAL_TYPE.EDIT_FORM:
              const selectedRowData = STORAGE.getSelectedItem().rows;
              fields.forEach((field) => {
                const value = selectedRowData[field] || "";
                content.push(
                  FLOWBITE_MODAL.generateFields({
                    title: field,
                    value,
                    handler: "HANDLERS.handleEditFormInput",
                    exclude: [LABELS.IMAGE],
                  })
                );
                return content.join(" ");
              });
            default:
              break;
          }
        },

        generateContent: (modalType, tableName) => {
          const activateSelectElement = ({
            store,
            element,
            onChangeHandler = () => {},
            onDropdownOpenHandler = () => {},
            wrapperStyle,
            controlStyle,
            dropdownStyle,
          }) => {
            store = new TomSelect(element, {
              plugins: ["dropdown_input"],
              onChange: onChangeHandler,
            });
            // store.on(eventListener.event, eventListener.action);
            store.on(
              "onDropdownOpen",
              UI_COMPONENTS.modifyStyleWhenDropdownOpen(store)
            );

            UI_COMPONENTS.addArrowToTomSelect(store);
            UI_COMPONENTS.addStyleToTomSelect({
              element: store,
              wrapperStyle,
              controlStyle,
              dropdownStyle,
            });
          };

          const handleSelectedValue = (value) => {
            console.log("valueL: ", value);
            // (options) => {
            //         const customer = options[0].value;
            //         const customerInfo =
            //           STORAGE.getCustomerInfoByName(customer);
            //         const customerId = customerInfo[0][LABELS.CUSTOMER_ID];
            //         const address = customerInfo[0][LABELS.ADDRESS];
            //         const phoneNumber = customerInfo[0][LABELS.PHONE_NUMBER];

            //         const customerIdFieldId =
            //           ELEMENT_IDS.MODAL.CONTENT[LABELS.CUSTOMER_ID];
            //         const addressFieldId =
            //           ELEMENT_IDS.MODAL.CONTENT[LABELS.ADDRESS];
            //         const sdtFieldId =
            //           ELEMENT_IDS.MODAL.CONTENT[LABELS.PHONE_NUMBER];

            //         console.log("customerInfo: ", customerInfo);
            //         UI_COMPONENTS.setValueToFieldById(
            //           addressFieldId,
            //           customerId
            //         );
            //         UI_COMPONENTS.setValueToFieldById(addressFieldId, address);
            //         UI_COMPONENTS.setValueToFieldById(sdtFieldId, phoneNumber);

            //         STORAGE.setNewItemCustomerInfo({
            //           [LABELS.CUSTOMER_ID]: customerId,
            //           [LABELS.CUSTOMER]: customer,
            //           [LABELS.ADDRESS]: address,
            //           [LABELS.PHONE_NUMBER]: phoneNumber,
            //         });
            //       }
          };

          const content = document.createElement("div");
          const body = FLOWBITE_MODAL.getBodyElement();
          const normalStyle = ["h-[30px]"];
          let tableData = STORAGE.getData(tableName);
          let fields = tableData.columns;
          let form, elements;

          switch (tableName) {
            case LABELS.CUSTOMER:
              elements = FLOWBITE_MODAL.generateCustomerContent({
                type: modalType,
                fields,
              });

              elements = UI_COMPONENTS.applyFormLayout("CLASSIC", elements);

              elements.forEach((element) => {
                if (
                  element &&
                  (element.hasChildNodes() || element.innerText.trim() !== "")
                ) {
                  content.appendChild(element);
                }
              });

              break;
            case LABELS.ORDER_SUMMARY:
              form = FLOWBITE_MODAL.generateOrderContent({
                type: modalType,
                fields,
              });

              content.appendChild(form);
              content.classList.add("h-[75vh]");

              break;
            case LABELS.PRODUCTION:
              elements = FLOWBITE_MODAL.generateProductionContent({
                type: modalType,
                fields,
              });

              elements = UI_COMPONENTS.applyFormLayout("CLASSIC", elements);

              elements.forEach((element) => {
                if (
                  element &&
                  (element.hasChildNodes() || element.innerText.trim() !== "")
                ) {
                  content.appendChild(element);
                }
              });

              break;
            default:
              break;
          }

          // STORAGE.setEditedItem(
          //   selectedRowData.rows,
          //   tableName,
          //   selectedRowData?.position
          // );

          body.innerHTML = ""; // Clear previous content
          body.appendChild(content);

          switch (tableName) {
            case LABELS.ORDER_SUMMARY:
              const selectElements = Array.from(
                content.querySelectorAll('[role="single-select"]')
              );

              // const productFields = Array.from(
              //   content.querySelectorAll(`[data-field='${LABELS.PRODUCT}']`)
              // );

              const customerSelection = selectElements.shift();
              const goodsSelection = selectElements.shift();
              const statusSelection = selectElements.shift();

              // productFields.forEach((element) => {
              //   UI_COMPONENTS.activateCustomSelect(
              //     element,
              //     STORAGE.getProductList()
              //   );
              // });

              // activateSelectElement({
              //   store: INSTANCES["CUSTOMER_NAMES"],
              //   element: customerSelection,
              //   onChangeHandler: handleSelectedValue,
              //   wrapperStyle: normalStyle,
              // });

              // activateSelectElement({
              //   store: INSTANCES["GOODS"],
              //   element: goodsSelection,
              //   onChangeHandler: (value) => {
              //     STORAGE.setNewItemOrderInfo({ [LABELS.GOODS]: value });
              //   },
              //   wrapperStyle: normalStyle,
              //   dropdownStyle: ["z-[9999]"],
              // });

              // activateSelectElement({
              //   store: INSTANCES["STATUS"],
              //   element: statusSelection,
              //   onChangeHandler: (value) => {
              //     STORAGE.setNewItemOrderInfo({ [LABELS.GOODS]: value });
              //   },
              //   wrapperStyle: normalStyle,
              //   dropdownStyle: ["z-[9999]"],
              // });

              // selectElements.forEach((element) => {
              //   if (!INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"]) {
              //     INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"] = [];
              //   }

              //   tomSelectInstance = new TomSelect(element, {
              //     openOnFocus: false,
              //     onDropdownClose: () => {
              //       STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
              //       const comboBox =
              //         element.parentNode.querySelector("[role='combobox']");
              //       comboBox.setAttribute("readonly", true);
              //     },
              //     onChange: (value) => {
              //       console.log("value: ", value);
              //     },
              //     onInitialize: () => {},

              //     onFocus: () => {
              //       const cell = element.closest("td");
              //       cell.focus();
              //     },
              //   });

              // tomSelectInstance.on("focus", () => {
              //   const originalElement = tomSelectInstance.input;
              //   const cell = originalElement.closest("td");

              //   console.log("cell: ", cell);
              // });

              // const control = tomSelectInstance.control
              //   control.addEventListener('click',(e) => {
              //     console.log("control is clicked")
              //   }
              //   )

              //   const input = control.querySelector("input")
              //   input.addEventListener('click',(e) => {
              //     console.log("input is clicked")
              //   }
              //   )
              //   tomSelectInstance.on("focus", () => {
              //     const wrapper = tomSelectInstance.wrapper;
              //     const control = tomSelectInstance.control;
              //     const input = tomSelectInstance.input;
              //     input.addEventListener("keydown", (e) => {
              //       console.log(e);
              //     });
              //     control.addEventListener("keydown", (e) => {
              //       console.log(e);
              //     });
              //     wrapper.addEventListener("keydown", (e) => {
              //       console.log(e);
              //     });
              //   });

              //   UI_COMPONENTS.addArrowToTomSelect(tomSelectInstance);
              //   UI_COMPONENTS.addStyleToTomSelect({
              //     element: tomSelectInstance,
              //     wrapperStyle: normalStyle,
              //     controlStyle: ["border-0"],
              //   });
              //   INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"].push(
              //     tomSelectInstance
              //   );
              // });

              // INSTANCES["CUSTOMER_NAMES"] = new SlimSelect({
              //   select: customerSelection,
              //   settings: {
              //     placeholderText: " ",
              //   },
              //   events:
              //   {afterChange: (value) => {
              //       const customer = options[0].value;
              //       const customerInfo =
              //         STORAGE.getCustomerInfoByName(customer);
              //       const customerId = customerInfo[0][LABELS.CUSTOMER_ID];
              //       const address = customerInfo[0][LABELS.ADDRESS];
              //       const phoneNumber = customerInfo[0][LABELS.PHONE_NUMBER];

              //       const customerIdFieldId =
              //         ELEMENT_IDS.MODAL.CONTENT[LABELS.CUSTOMER_ID];
              //       const addressFieldId =
              //         ELEMENT_IDS.MODAL.CONTENT[LABELS.ADDRESS];
              //       const sdtFieldId =
              //         ELEMENT_IDS.MODAL.CONTENT[LABELS.PHONE_NUMBER];

              //       console.log("customerInfo: ", customerInfo);
              //       UI_COMPONENTS.setValueToFieldById(
              //         addressFieldId,
              //         customerId
              //       );
              //       UI_COMPONENTS.setValueToFieldById(addressFieldId, address);
              //       UI_COMPONENTS.setValueToFieldById(sdtFieldId, phoneNumber);

              //       STORAGE.setNewItemCustomerInfo({
              //         [LABELS.CUSTOMER_ID]: customerId,
              //         [LABELS.CUSTOMER]: customer,
              //         [LABELS.ADDRESS]: address,
              //         [LABELS.PHONE_NUMBER]: phoneNumber,
              //       });
              //     },}

              // });

              //  INSTANCES["GOODS"] =  new SlimSelect({
              //     select: goodsSelection,
              //     settings: {
              //       placeholderText: " ",
              //     },
              //     event: {
              //       afterChange: (options) => {
              //         const value = options[0].value;
              //         STORAGE.setNewItemOrderInfo({ [LABELS.GOODS]: value });
              //       },
              //     }

              //   })

              //  INSTANCES["STATUS"] = new  SlimSelect({
              //     select: statusSelection,
              //     settings: {
              //       placeholderText: " ",
              //     },
              //     event: {
              //       afterChange: (options) => {
              //         const value = options[0].value;
              //         STORAGE.setNewItemOrderInfo({ [LABELS.STATUS]: value });
              //       },
              //     }
              //   })

              // slimSelects.forEach((element, index) => {
              //   if(!INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"]) {
              //     INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"] = []
              //   }

              //   INSTANCES["SPREADSHEET_SLIMSELECT_CELLS"].push(new  SlimSelect({
              //   select: element,
              //   settings: {
              //     placeholderText: " ",
              //   },
              //   event: {
              //     afterClose: () => {
              //         STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
              //         const comboBox =
              //           element.parentNode.querySelector("[role='combobox']");
              //         comboBox.setAttribute("readonly", true);
              //       },
              //       ...DEFAULT_CONFIG.ACTIONS.ORDER.action2,
              //   }
              // }) )

              // });

              // console.log("INSTANCE: ", INSTANCES);

              // // combox is an element that displays selected value (a part of slim select element)
              // const comboboxes = Array.from(
              //   content.querySelectorAll('[role="combobox"]')
              // );

              // const comboboxCustomerSelection = comboboxes.shift();
              // const comboboxGoodsSelection = comboboxes.shift();
              // const comboboxStatusSelection = comboboxes.shift();

              // UI_COMPONENTS.addStyleToSlimSelect({
              //   elements: [comboboxCustomerSelection],
              //   style: [
              //     ...DEFAULT_CONFIG.SLIM_SELECT.STYLE.MODERN,
              //     ...DEFAULT_CONFIG.STYLE.FOCUS,
              //   ],
              // });

              // UI_COMPONENTS.addStyleToSlimSelect({
              //   elements: [comboboxGoodsSelection],
              //   style: [
              //     ...DEFAULT_CONFIG.SLIM_SELECT.STYLE.MODERN,
              //     ...DEFAULT_CONFIG.STYLE.FOCUS,
              //   ],
              // });

              // UI_COMPONENTS.addStyleToSlimSelect({
              //   elements: [comboboxStatusSelection],
              //   style: [
              //     ...DEFAULT_CONFIG.SLIM_SELECT.STYLE.MODERN,
              //     ...DEFAULT_CONFIG.STYLE.FOCUS,
              //   ],
              // });

              // UI_COMPONENTS.addStyleToSlimSelect({
              //   elements: comboboxes,
              //   style: [
              //     ...DEFAULT_CONFIG.SLIM_SELECT.STYLE.CLASSIC,
              //     "focus:ring-1",
              //     "focus:ring-blue-500",
              //   ],
              // });

              break;
            default:
              break;
          }
        },

        generateFooter: (modalType) => {
          // const content = document.createElement("div");
          const footer = FLOWBITE_MODAL.getFooterElement();
          footer.innerHTML = ""; // Clear previous content
          // content.classList.add(
          //   "flex",
          //   "items-center",
          //   "justify-end",
          //   "p-3",
          //   "border-t",
          //   "border-[#ccc]",
          //   "rounded-b"
          // );
          // content.innerHTML = FLOWBITE_MODAL.createFooterButtons(modalType);
          footer.appendChild(FLOWBITE_MODAL.createFooterButtons(modalType));
        },

        openModal: (modalType, tableName) => {
          FLOWBITE_MODAL.generateModal(modalType, tableName);
          ELEMENT_IDS.MODAL.CONTAINER.classList.remove("hidden");
          const activeTable = STORAGE.getActiveTable();
          // if (activeTable === LABELS.ORDER_SUMMARY) {
          //   ELEMENT_IDS.MODAL.CONTENT.BODY_ELEMENT.classList.add("h-[75vh]");
          // }
        },

        closeModal: () => {
          // const activeTable = STORAGE.getActiveTable();
          // if (activeTable === LABELS.ORDER_SUMMARY) {
          //   ELEMENT_IDS.MODAL.CONTENT.BODY_ELEMENT.classList.remove("h-[75vh]");
          // }
          ELEMENT_IDS.MODAL.CONTAINER.classList.add("hidden");
          FLOWBITE_MODAL.clear();
        },

        clear: () => {
          STORAGE.resetEditedRow();
          STORAGE.resetNewItem();
          STORAGE.clearInstance();
          DEFAULT_CONFIG.ROW_NUMBER = 1;
        },

        createFooterButtons: (formType) => {
          let buttonName;
          const container = document.createElement("div");
          container.classList.add(
            "flex",
            "items-center",
            "justify-end",
            "p-3",
            "border-t",
            "border-[#ccc]",
            "rounded-b"
          );

          switch (formType) {
            case MODAL_TYPE.ADD_FORM:
              buttonName = LABELS.ADD;
              break;
            case MODAL_TYPE.EDIT_FORM:
              buttonName = LABELS.EDIT;
              break;
          }

          const addButton = UI_COMPONENTS.createButton({
            id: ELEMENT_IDS.MODAL.BUTTONS.POST.ID,
            classNames:
              "text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",
            label: buttonName,
            attribute: { name: "data-modal-hide", value: "modal" },
            event: {
              type: "click",
              action: (e) => {
                const orderSummary = FLOWBITE_MODAL.createOrderSummary();
                const orderDetail = FLOWBITE_MODAL.createOrderDetail();

                console.log("order summary: ", orderSummary);
                console.log("order detail: ", orderDetail);
              },
            },
          });
          const cancelButton = UI_COMPONENTS.createButton({
            id: ELEMENT_IDS.MODAL.BUTTONS.CANCEL.ID,
            classNames:
              "py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-[#ccc] hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100",
            label: LABELS.CANCEL,
            attribute: { name: "data-modal-hide", value: "modal" },
          });

          container.appendChild(addButton);
          container.appendChild(cancelButton);
          return container;
        },
      };

      const DATABASE = {
        isStoreAvailable: (version, name) => {
          return new Promise((resolve, reject) => {
            const request = indexedDB.open(LABELS.DATABASE, version);
            request.onsuccess = (event) => {
              const db = event.target.result;
              const hasStore = db.objectStoreNames.contains(name);
              db.close();
              resolve(hasStore);
            };
            request.onerror = () => {
              console.error("Cannot open database");
              reject(false);
            };
          });
        },

        save: (name, data) => {
          let currentVersion = STORAGE.getDatabaseVersion() || 1;
          DATABASE.isStoreAvailable(currentVersion, name)
            .then((isAvailable) => {
              if (!isAvailable) {
                console.log("isAvailable: ", isAvailable);
                DATABASE.addMultipleData(++currentVersion, name, data);
                STORAGE.setDatabaseVersion(++currentVersion);
              }
            })
            .catch();
        },

        addMultipleData: (version, storeName, data) => {
          const request = indexedDB.open(LABELS.DATABASE, version);
          request.onsuccess = (event) => {
            const db = event.target.result;
            const transaction = db.transaction(storeName, "readwrite");
            const store = transaction.objectStore(storeName);

            data.forEach((order) => {
              store.put(order).onsuccess = () => {
                console.log("Data added successfully");
              };
            });

            transaction.oncomplete = () => {
              console.log("Transaction completed successfully");
            };
          };

          request.onerror = (event) => {
            console.error("Error opening database:", event.target.error);
          };

          request.onupgradeneeded = (event) => {
            const db = event.target.result;
            if (!db.objectStoreNames.contains(storeName)) {
              db.createObjectStore(storeName, { keyPath: "id" });
            }
          };
        },

        addData: (version, storeName, data) => {
          const request = indexedDB.open(LABELS.DATABASE, 1);
          request.onsuccess = (event) => {
            const db = event.target.result;
            const transaction = db.transaction(storeName, "readwrite");
            const store = transaction.objectStore(storeName);

            store.put(data).onsuccess = () => {
              console.log("Data added successfully");
            };

            transaction.oncomplete = () => {
              console.log("Transaction completed successfully");
            };
          };

          request.onerror = (event) => {
            console.error("Error opening database:", event.target.error);
          };

          request.onupgradeneeded = (event) => {
            const db = event.target.result;
            if (!db.objectStoreNames.contains(storeName)) {
              db.createObjectStore(storeName, { keyPath: "id" });
            }
          };
        },

        getData: () => {},

        updateData: () => {},

        deleteDate: () => {},
      };

      const STORAGE = {
        //
        setActiveCell: (boolean, id) => {
          const memory = STORAGE.getMemory();

          memory.state.spreadsheet.cell.isActive = boolean;
          memory.state.spreadsheet.cell.id = id;
          STORAGE.setMemory(memory);
        },
        getActiveCell: () => {
          const memory = STORAGE.getMemory();
          return memory.state.spreadsheet.cell;
        },

        //
        setSpreadsheetMode: (value) => {
          const memory = STORAGE.getMemory();
          memory.state.spreadsheet.mode = value;
          STORAGE.setMemory(memory);
        },
        getSpreadsheetMode: () => {
          const memory = STORAGE.getMemory();
          return memory.state.spreadsheet.mode;
        },

        // Set/Get Active Table
        setActiveTable: (table) => {
          const memory = STORAGE.getMemory();
          memory.state.activeTable = table;
          STORAGE.setMemory(memory);
        },
        getActiveTable: () => {
          const memory = STORAGE.getMemory();
          return memory.state.activeTable;
        },

        // Set/Get Active Tab
        setActiveTab: (tab) => {
          const memory = STORAGE.getMemory();
          memory.state.activeTab = tab;
          STORAGE.setMemory(memory);
        },
        getActiveTab: () => {
          const memory = STORAGE.getMemory();
          return memory.state.activeTab;
        },

        // Set/Get Customer List
        setCustomerList: (data) => {
          const memory = STORAGE.getMemory();
          memory.data.customers = data;
          STORAGE.setMemory(memory);
        },
        getCustomerList: () => {
          const memory = STORAGE.getMemory();
          return memory.data.customers;
        },

        //  Set/Get Product List
        setProductList: (data) => {
          const memory = STORAGE.getMemory();
          memory.data.products = data;
          STORAGE.setMemory(memory);
        },
        getProductList: () => {
          const memory = STORAGE.getMemory();
          return memory.data.products;
        },

        // Set/Get Selected Row
        setSelectedItem: (row) => {
          const memory = STORAGE.getMemory();
          memory.data.selectedRow = row;
          STORAGE.setMemory(memory);
        },
        getSelectedItem: () => {
          const memory = STORAGE.getMemory();
          return memory.data.selectedRow;
        },

        // Set/Get Edited Row
        setEditedItem: (rowData, tableName, position) => {
          const memory = STORAGE.getMemory();
          const selectedRowData = STORAGE.getSelectedItem()?.rows || {};
          let editedRow = memory.data.editedRow || {};

          if (!editedRow.data) {
            editedRow.data = { ...selectedRowData };
          }

          editedRow.data = { ...editedRow.data, ...rowData };
          editedRow.position = position;
          editedRow.table = tableName;

          memory.data.editedRow = editedRow;

          STORAGE.setMemory(memory);
        },
        getEditedItem: () => {
          const memory = STORAGE.getMemory();
          return memory.data.editedRow;
        },

        //
        setNewItemCustomerInfo: (objValue) => {
          const memory = STORAGE.getMemory();
          const data = Object.assign(
            {},
            memory.data.newItem.customerInfo,
            objValue
          );
          memory.data.newItem.customerInfo = data;
          STORAGE.setMemory(memory);
        },
        getNewItemCustomerInfo: () => {
          const memory = STORAGE.getMemory();
          return memory.data.newItem.customerInfo;
        },

        //
        setNewItemOrderInfo: (objValue) => {
          const memory = STORAGE.getMemory();
          const data = Object.assign(
            {},
            memory.data.newItem.orderInfo,
            objValue
          );
          memory.data.newItem.orderInfo = data;
          STORAGE.setMemory(memory);
        },
        getNewItemOrderInfo: () => {
          const memory = STORAGE.getMemory();
          return memory.data.newItem.orderInfo;
        },

        //
        setNewItemOrderInfo: (data) => {
          const memory = STORAGE.getMemory();
          memory.data.newItem.list = data;
          STORAGE.setMemory(memory);
        },
        getNewItemOrderInfo: () => {
          const memory = STORAGE.getMemory();
          return memory.data.newItem.list;
        },
        resetNewItemOrderInfo: () => {
          const memory = STORAGE.getMemory();
          memory.data.newItem.list = [];
          STORAGE.setMemory(memory);
        },

        resetNewItem: () => {
          const memory = STORAGE.getMemory();
          memory.data.newItem =  {
                customerInfo: {},
                orderInfo: {},
                list: [],
              };
          STORAGE.setMemory(memory);
        },


        // Set/Get New Row
        setNewItem: (key, value, tableName) => {
          const memory = STORAGE.getMemory();
          memory.data.newItem.table = tableName;
          memory.data.newItem.data[key] = value;
          STORAGE.setMemory(memory);
        },
        getNewItem: () => {
          const memory = STORAGE.getMemory();
          return memory.data.newItem;
        },

        //

        setNewOrderData: (key, value) => {
          const memory = STORAGE.getMemory();
          // memory.data.newItem.table = tableName;

          if (!memory.data.newItem.data[key]) {
            memory.data.newItem.data[key] = {};
          }

          if (typeof value === "object") {
            Object.assign(memory.data.newItem.data[key], value);
          }

          console.log(
            "memory.data.newItem.data[key]: ",
            memory.data.newItem.data[key]
          );

          // if (key === LABELS.ORDER_DETAIL) {
          //   let oldData = memory.data.newItem.data[key];
          //   value.push(...oldData);
          //   memory.data.newItem.data[key] = value;
          // }

          // memory.data.newItem.data[key] = value;

          STORAGE.setMemory(memory);
        },

        // Set/Get Filter State
        setFilterState: (boolean) => {
          const memory = STORAGE.getMemory();
          memory.state.filter.isActive = boolean;
          STORAGE.setMemory(memory);
        },
        getFilterState: () => {
          const memory = STORAGE.getMemory();
          return memory.state.filter.isActive;
        },

        setFilterNameByTable: (table, name) => {
          const memory = STORAGE.getMemory();
          memory.data.filter[table].name = name;
          STORAGE.setMemory(memory);
        },
        getFilterNameByTable: (table) => {
          const memory = STORAGE.getMemory();
          return memory.data.filter[table].name;
        },

        setFilterActiveStateByTable: (table, boolean) => {
          const memory = STORAGE.getMemory();
          memory.state.accordion.filter[table].isActive = boolean;
          STORAGE.setMemory(memory);
        },
        getFilterActiveStateByTable: (table) => {
          const memory = STORAGE.getMemory();
          return memory.state.accordion.filter[table].isActive;
        },

        // Set/Get Filter Field
        setFilterFieldsByTable: (table, data) => {
          let memory = STORAGE.getMemory();
          memory.data.filter[table] = data;
          STORAGE.setMemory(memory);
        },
        getFilterFieldsByTable: (table) => {
          const memory = STORAGE.getMemory();
          if (memory?.data?.filter[table]) {
            return memory?.data?.filter[table];
          } else {
            return (table = {});
          }
        },
        clearFilterFieldsByTable: (table) => {
          let data = {};
          STORAGE.setFilterFieldsByTable(table, data);
        },

        // Set/Get Filter Data
        // setFilterDataByTable(table, data) {
        //   let memory = STORAGE.getMemory();
        //   memory.data.filter[table] = data;
        //   STORAGE.setMemory(memory);
        // }
        // getFilterDataByTable(table) {
        //   const memory = STORAGE.getMemory();
        //   return memory.data.filter[table];
        // }

        //

        setInstance: (store, value) => {
          let memory = STORAGE.getMemory();

          if (!memory.data.instances[store]) {
            memory.data.instances[store] = [];
          }

          memory.data.instances[store].push(value);

          STORAGE.setMemory(memory);
        },

        getInstance: () => {
          const memory = STORAGE.getMemory();
          return memory.data.instances;
        },

        clearInstance: () => {
          let memory = STORAGE.getMemory();
          memory.data.instances = {};

          STORAGE.setMemory(memory);
        },

        // Set/Get Memory
        setMemory: (memory) => {
          sessionStorage.setItem("AppMemory", JSON.stringify(memory));
        },
        getMemory: () => {
          const storedMemory = sessionStorage.getItem("AppMemory");
          if (storedMemory) {
            return JSON.parse(storedMemory);
          }
          return {
            state: {
              activeTab: "",
              activeTable: "",
              filter: {
                isActive: false,
              },
              spreadsheet: {
                isActive: false,
                mode: "navigating",
                cell: {
                  isActive: false,
                  id: "",
                },
              },
            },
            data: {
              tables: {},
              instances: {},
              filter: {},
              newItem: {
                customerInfo: {},
                orderInfo: {},
                list: [],
              },
              selectItem: {
                data: {},
                table: "",
                position: "",
              },
              editItem: {
                data: {},
                table: "",
                position: "",
              },
            },
          }; // Return a default object if no data is found
        },

        // Set/Get Table Data
        setDataByTable: (table, tableData) => {
          let newMemory, tableDatabase;
          const memory = STORAGE.getMemory();

          if (!memory.data?.tables.hasOwnProperty(table)) {
            memory.data.tables[table] = {
              name: tableData?.name || "",
              rows: tableData?.rows || [],
              columns: tableData?.columns || [],
            };
          }

          STORAGE.setMemory(memory);
        },

        getData: (table) => {
          const memory = STORAGE.getMemory();
          return memory.data.tables[table];
        },

        clearSelectedData: () => {
          let memory = STORAGE.getMemory();
          let selectRow = memory?.data?.selectedRow || {};

          if (selectRow?.data) {
            selectRow = { data: {}, table: "", position: 0 };
          }

          memory.data.selectedRow = selectRow;
          STORAGE.setMemory(memory);
        },

        resetEditedRow: () => {
          let memory = STORAGE.getMemory();
          let editRow = memory?.data?.editedRow || {};

          if (editRow?.data) {
            editRow = { data: {}, table: "", position: 0 };
          }

          memory.data.editedRow = editRow;
          STORAGE.setMemory(memory);
        },



        setDatabaseVersion: (number) => {
          console.log("setDatabaseVersion() - number: ", number);

          localStorage.setItem("databaseVersion", JSON.stringify(number));
        },

        getDatabaseVersion: () => {
          const versionNumber = localStorage.getItem("databaseVersion");
          console.log("getDatabaseVersion() - versionNumber: ", versionNumber);
          if (versionNumber) {
            return JSON.parse(versionNumber);
          }

          return null;
        },

        getCustomerInfoByName: (name) => {
          const data = STORAGE.getData(LABELS.CUSTOMER);
          const customers = data.rows;
          const target =
            customers.filter((customer) => customer[LABELS.NAME] === name) ||
            null;

          return target;
        },
      };

      const SERVICES = {
        postData: (formType) => {
          let formData;

          switch (formType) {
            case "addForm":
              formData = STORAGE.getNewItem();
              break;
            case "editForm":
              formData = STORAGE.getEditedItem();
              break;
          }

          // Send form data to the server-side function saveDataToSheet
          // google.script.run
          //   .withSuccessHandler((response) => {
          //     console.log("Form data successfully saved:", response);
          //     // Optionally, show a success message to the user
          //   })
          //   .withFailureHandler((error) => {
          //     console.error("Error saving form data:", error);
          //     // Optionally, show an error message to the user
          //   })
          //   .saveDataToSheet(formData);
        },

        fetchData: (key) => {
          console.log("Getting data from sheet: ", key);
          return new Promise((resolve, reject) => {
            google.script.run
              .withSuccessHandler((response) => {
                if (
                  response === null ||
                  response === undefined ||
                  response === ""
                ) {
                  console.error(
                    "Response is null, undefined, or an empty string"
                  );

                  reject(new Error("Invalid response"));
                  return;
                }
                console.log("Successfully getting response");
                resolve(JSON.parse(response));
              })
              .withFailureHandler((e) => {
                console.error("Unable to get data from " + key + " sheet");
                reject(e);
              })
              .getDataFromSheet(key);
          });
        },

        fetchNecessityData: async () => {
          // Fetch data
          const [customerData, productData] = await Promise.all([
            SERVICES.fetchData(LABELS.CUSTOMER),
            SERVICES.fetchData(LABELS.PRODUCT),
          ]);

          // Process fetched data
          const customerNames = getDataByColumn(customerData, LABELS.NAME);
          const productNames = getDataByColumn(productData, LABELS.NAME);

          // Save data to storage
          STORAGE.setCustomerList(customerNames);
          STORAGE.setProductList(productNames);
          STORAGE.setDataByTable(LABELS.CUSTOMER, customerData);
          STORAGE.setDataByTable(LABELS.PRODUCT, productData);

          // Add data to database
          // console.log("Saving data to database");

          // await DATABASE.save(LABELS.CUSTOMER, customerData.rows);
          // await DATABASE.save(LABELS.PRODUCT, productData.rows);
          // console.log("Saved data successfully");
        },
      };

      const FILTER_SIDEBAR = {
        toggle: (table) => {
          const filter = ELEMENT_IDS.SIDE_BAR.FILTER.ELEMENT;
          const filterContent = ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.ELEMENT;
          const isFilterActive = STORAGE.getFilterState();

          if (isFilterActive) {
            FILTER_SIDEBAR.hide();
          } else {
            console.log("toggle filter");
            FILTER_SIDEBAR.show(table);
          }
        },

        hide: () => {
          const activeTab = STORAGE.getActiveTab();
          const filter = ELEMENT_IDS.SIDE_BAR.FILTER.ELEMENT;
          filter.classList.remove("active");

          setTimeout(() => {
            STORAGE.setFilterState(false);
            destroyAllMultipleSelect();
          }, 500);
        },

        show: (table) => {
          const activeTable = STORAGE.getActiveTab();
          const filter = ELEMENT_IDS.SIDE_BAR.FILTER.ELEMENT;
          STORAGE.setFilterState(true);
          FILTER_SIDEBAR.generateMenu(table);
          console.log("showing filter: ", filter);
          filter.classList.add("active");
        },

        // createNameField: (activeTable, field) => {
        //   if (activeTable === LABELS.CUSTOMER) {
        //     let data = STORAGE.getCustomerList();
        //     let id = UTILITIES.generateFilterFieldId(activeTable, field);
        //     return UI_COMPONENTS.createSelectInput({
        //       id,
        //       field,
        //       options: data,
        //       optionClicked: "HANDLERS.handleFilterInputFieldChange",
        //     });
        //   }

        //   if (
        //     activeTable === LABELS.PRODUCTION ||
        //     activeTable === LABELS.PRODUCT
        //   ) {
        //     let data = STORAGE.getProductList();
        //     let id = UTILITIES.generateFilterFieldId(activeTable, field);
        //     return UI_COMPONENTS.createSelectInput({
        //       id,
        //       field,
        //       options: data,
        //       optionClicked: "HANDLERS.handleFilterInputFieldChange",
        //     });
        //   }

        //   return null;
        // },

        // generateCustomerField: (type, field) => {
        //   if (type === LABELS.ORDER_SUMMARY) {
        //     let data = STORAGE.getCustomerList();
        //     let id = UTILITIES.generateMultipleSelectId(type, field);
        //     return UI_COMPONENTS.createSelectInput({
        //       id,
        //       field,
        //       options: data,
        //       optionClicked: "HANDLERS.handleFilterInputFieldChange",
        //     });
        //   }

        //   return null;
        // },

        // Creates a generic text input
        // createTextInput: (field) => {
        //   return `
        //           <div class="mb-1">${field}</div>
        //           <input
        //               type="text"
        //               class="${DEFAULT_CONFIG.STYLE.NORMAL_INPUT_FIELD} rounded-lg"
        //           />
        //         `;
        // },

        // Generate PRODUCT field element

        // createFinishedProductField: (activeTable, field) => {
        //   if (activeTable === LABELS.PRODUCTION) {
        //     const activeTable = STORAGE.getActiveTable();
        //     const filterFields = STORAGE.getFilterFieldsByTable(activeTable);
        //     const selectedCondition = filterFields?.condition;
        //     const [inputId, dropdownId, dropdownButtonId] =
        //       UTILITIES.generateDropdownInputElementIds(activeTable, field);
        //     setFilterFieldId(activeTable, field, {
        //       INPUT_ID: inputId,
        //       DROPDOWN_ID: dropdownId,
        //       DROPDOWN_BUTTON_ID: dropdownButtonId,
        //     });
        //     return UI_COMPONENTS.createDropdownInput({
        //       inputId,
        //       dropdownId,
        //       dropdownButtonId,
        //       title: field,
        //       buttonLabel: selectedCondition,
        //       dropdownOptions: DEFAULT_CONFIG.COMPARISON_OPERATORS,
        //       dropdownButtonClicked: "toggleDropdown",
        //       dropdownClicked: "HANDLERS.handleFilterDropdownClick",
        //       inputChange: "HANDLERS.handleFilterInputFieldChange",
        //     });
        //   }
        //   return null;
        // },

        // createDeliveredField: (activeTable, field) => {
        //   if (activeTable === LABELS.PRODUCTION) {
        //     const activeTable = STORAGE.getActiveTable();
        //     const filterFields = STORAGE.getFilterFieldsByTable(activeTable);
        //     const selectedCondition = filterFields?.condition;
        //     const [inputId, dropdownId, dropdownButtonId] =
        //       UTILITIES.generateDropdownInputElementIds(activeTable, field);
        //     setFilterFieldId(activeTable, field, {
        //       INPUT_ID: inputId,
        //       DROPDOWN_ID: dropdownId,
        //       DROPDOWN_BUTTON_ID: dropdownButtonId,
        //     });
        //     return UI_COMPONENTS.createDropdownInput({
        //       inputId,
        //       dropdownId,
        //       dropdownButtonId,
        //       title: field,
        //       buttonLabel: selectedCondition,
        //       dropdownOptions: DEFAULT_CONFIG.COMPARISON_OPERATORS,
        //       dropdownButtonClicked: "toggleDropdown",
        //       dropdownClicked: "HANDLERS.handleFilterDropdownClick",
        //       inputChange: "HANDLERS.handleFilterInputFieldChange",
        //     });
        //   }
        //   return null;
        // },
        // generateStatusField: (activeTable, field) => {
        //   if (activeTable === LABELS.PRODUCTION) {
        //     let id = UTILITIES.generateMultipleSelectId(activeTable, field);
        //     return UI_COMPONENTS.createSelectInput({
        //       id,
        //       field,
        //       options: DEFAULT_CONFIG.STATUS_OPTIONS[activeTable],
        //       optionClicked: "HANDLERS.handleFilterInputFieldChange",
        //     });
        //   }
        //   return null;
        // },

        // generateDefaultField: (table, field) => {
        //   let id = UTILITIES.generateFilterFieldId(table, field);
        //   setFilterFieldId(table, field, {
        //     ID: id,
        //   });
        //   return UI_COMPONENTS.createTextInput(
        //     id,
        //     null,
        //     field,
        //     "HANDLERS.handleFilterInputFieldChange"
        //   );
        // },

        generateFields: ({ title, handler, value, exclude = [] }) => {
          console.log("generateFields - title: ", title);

          if (title === LABELS.ID && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: handler,
            });
          }

          if (title === LABELS.TYPE && !exclude.includes(title)) {
            const id = UTILITIES.generateRandomId(21);
            return UI_COMPONENTS.createSelectInput({
              id,
              title,
              options: DEFAULT_CONFIG.TYPE_OPTIONS,
              multipleSelect: true,
            });
          }

          if (title === LABELS.DATE && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({ title, type: "date" });
          }

          if (title === LABELS.NAME && !exclude.includes(title)) {
            const activeTable = STORAGE.getActiveTable();
            return UI_COMPONENTS.createNameField({
              label: title,
              action: "HANDLERS.handleAddFormInput",
              multipleSelect: true,
            });
          }

          if (title === LABELS.CUSTOMER && !exclude.includes(title)) {
            return UI_COMPONENTS.createCustomerField({
              label: title,
              action: "HANDLERS.handleAddFormInput",
              multipleSelect: true,
            });
          }

          if (title === LABELS.PHONE_NUMBER && !exclude.includes(title)) {
            return UI_COMPONENTS.createInput({
              title,
              action: "HANDLERS.handleAddFormInput",
              type: "tel",
            });
          }

          if (title === LABELS.PRODUCT && !exclude.includes(title)) {
            return FILTER_SIDEBAR.createProductField({
              title,
              multipleSelect: true,
            });
          }

          if (title === LABELS.FINISHED_PRODUCT && !exclude.includes(title)) {
            const activeTable = STORAGE.getActiveTable();
            const filterFields = STORAGE.getFilterFieldsByTable(activeTable);
            const selectedCondition = filterFields?.condition;
            const [inputId, dropdownId, dropdownButtonId] =
              UTILITIES.generateDropdownInputElementIds(activeTable, title);
            setFilterFieldId(activeTable, title, {
              INPUT_ID: inputId,
              DROPDOWN_ID: dropdownId,
              DROPDOWN_BUTTON_ID: dropdownButtonId,
            });
            return UI_COMPONENTS.createDropdownInput({
              inputId,
              dropdownId,
              dropdownButtonId,
              title,
              buttonLabel: selectedCondition,
              dropdownOptions: DEFAULT_CONFIG.COMPARISON_OPERATORS,
              dropdownButtonClicked: "toggleDropdown",
              dropdownClicked: "HANDLERS.handleFilterDropdownClick",
              inputChange: "HANDLERS.handleFilterInputFieldChange",
            });
          }

          if (title === LABELS.DELIVERED && !exclude.includes(title)) {
            const activeTable = STORAGE.getActiveTable();
            const filterFields = STORAGE.getFilterFieldsByTable(activeTable);
            const selectedCondition = filterFields?.condition;
            const [inputId, dropdownId, dropdownButtonId] =
              UTILITIES.generateDropdownInputElementIds(activeTable, title);
            setFilterFieldId(activeTable, title, {
              INPUT_ID: inputId,
              DROPDOWN_ID: dropdownId,
              DROPDOWN_BUTTON_ID: dropdownButtonId,
            });
            return UI_COMPONENTS.createDropdownInput({
              inputId,
              dropdownId,
              dropdownButtonId,
              title,
              buttonLabel: selectedCondition,
              dropdownOptions: DEFAULT_CONFIG.COMPARISON_OPERATORS,
              dropdownButtonClicked: "toggleDropdown",
              dropdownClicked: "HANDLERS.handleFilterDropdownClick",
              inputChange: "HANDLERS.handleFilterInputFieldChange",
            });
          }

          if (title === LABELS.QUANTITY && !exclude.includes(title)) {
            const activeTable = STORAGE.getActiveTable();
            const filterFields = STORAGE.getFilterFieldsByTable(activeTable);
            const selectedCondition = filterFields?.condition;
            const [inputId, dropdownId, dropdownButtonId] =
              UTILITIES.generateDropdownInputElementIds(activeTable, title);
            setFilterFieldId(activeTable, title, {
              INPUT_ID: inputId,
              DROPDOWN_ID: dropdownId,
              DROPDOWN_BUTTON_ID: dropdownButtonId,
            });
            return UI_COMPONENTS.createDropdownInput({
              inputId,
              dropdownId,
              dropdownButtonId,
              title,
              buttonLabel: selectedCondition,
              dropdownOptions: DEFAULT_CONFIG.COMPARISON_OPERATORS,
              dropdownButtonClicked: "toggleDropdown",
              dropdownClicked: "HANDLERS.handleFilterDropdownClick",
              inputChange: "HANDLERS.handleFilterInputFieldChange",
            });
          }

          if (title === LABELS.UNIT_COST && !exclude.includes(title)) {
            return null;
          }

          if (title === LABELS.UNIT && !exclude.includes(title)) {
            return UI_COMPONENTS.createUnitField({
              title,
              action: "HANDLERS.handleAddFormInput",
              multipleSelect: true,
            });
          }

          if (title === LABELS.COLLECT && !exclude.includes(title)) {
            return null;
          }

          if (title === LABELS.STATUS && !exclude.includes(title)) {
            return UI_COMPONENTS.createStatusField({
              title,
              action: "HANDLERS.handleAddFormInput",
              multipleSelect: true,
            });
          }

          if (title === LABELS.IMAGE && !exclude.includes(title)) {
            return null;
          }

          if (title === LABELS.NOTE && !exclude.includes(title)) {
            return null;
          }

          return null;
        },

        generateCustomerContent: (fields) => {
          const content = [];

          fields.forEach((field) => {
            content.push(
              FILTER_SIDEBAR.generateFields({
                title: field,
                handler: "",
                exclude: [LABELS.STT, LABELS.ADDRESS, LABELS.NOTE],
              })
            );
          });

          return content;
        },

        generateOrderContent: (fields) => {
          const content = [];

          fields.forEach((field) => {
            content.push(
              FILTER_SIDEBAR.generateFields({
                title: field,
                handler: "",
                exclude: [
                  LABELS.STT,
                  LABELS.IMAGE,
                  LABELS.COLLECT,
                  LABELS.DEBT,
                  LABELS.UNIT_COST,
                ],
              })
            );
          });

          return content;
        },

        generateProductionContent: (fields) => {
          const content = [];

          fields.forEach((field) => {
            content.push(
              FILTER_SIDEBAR.generateFields({
                title: field,
                handler: "",
                exclude: [LABELS.STT, LABELS.IMAGE, LABELS.NOTE],
              })
            );
          });

          console.log("generateProductionContent - content: ", content);
          return content;
        },
        // Generates the dropdown or input element based on the field type
        // generateElements: (field, activeTable) => {
        //   let data, ids;

        //   switch (field) {
        //     case LABELS.PRODUCT:
        //       return FILTER_SIDEBAR.generateProductField(activeTable, field);

        //     case LABELS.CUSTOMER:
        //       return FILTER_SIDEBAR.generateCustomerField(activeTable, field);

        //     case LABELS.FINISHED_PRODUCT:
        //       return FILTER_SIDEBAR.generateFinishedProductField(
        //         activeTable,
        //         field
        //       );

        //     case LABELS.DELIVERED:
        //       return FILTER_SIDEBAR.generatedDeliveredField(activeTable, field);

        //     case LABELS.NAME:
        //       return UI_COMPONENTS.createNameField({
        //         label: field,
        //         action: "HANDLERS.handleFilterMultipleSelect",
        //       });

        //     case LABELS.STATUS:
        //       return UI_COMPONENTS.createStatusField({
        //         label: field,
        //         action: "HANDLERS.handleFilterMultipleSelect",
        //       });

        //     case LABELS.IMAGE:
        //     case LABELS.NOTE:
        //       return null;
        //     case LABELS.ID:

        //     default:
        //       return FILTER_SIDEBAR.generateDefaultField(activeTable, field);
        //   }
        // },

        attachListenerToDropdownInput: (
          dropdownButtonId,
          dropdownId,
          inputId
        ) => {
          // Add event listeners
          const dropdownButton = document.getElementById(dropdownButtonId);
          const dropdown = document.getElementById(dropdownId);
          const input = document.getElementById(inputId);

          console.log(dropdownButton);
          // Button click event listener
          dropdownButton.addEventListener("click", (event) =>
            toggleDropdown(event, dropdownId)
          );

          // Dropdown options click event listener
          dropdown.querySelectorAll("div").forEach((div) => {
            div.addEventListener("click", (event) =>
              HANDLERS.handleFilterDropdownClick(
                event,
                "",
                div.getAttribute("value"),
                dropdownId,
                dropdownButtonId
              )
            );
          });

          // Input change event listener
          input.addEventListener("input", (event) =>
            HANDLERS.handleFilterInputFieldChange(event, title)
          );
        },

        generateMenu: (type) => {
          const activeTable = STORAGE.getActiveTable();
          const filterSidebar = ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.ELEMENT;
          const content = document.createElement("div");
          const fields = STORAGE.getData(activeTable).columns;
          let elements, data, button, ids, label;

          switch (type) {
            case LABELS.CUSTOMER:
              elements = FILTER_SIDEBAR.generateCustomerContent(fields);
              elements = UI_COMPONENTS.applyFormLayout("", elements);
              elements.forEach((element) => {
                if (element !== null) {
                  content.appendChild(element);
                  const multipleSelect = element.querySelector(
                    '[role="multiple-select"]'
                  );
                  if (multipleSelect) {
                    const field = multipleSelect.dataset.field || " ";
                    UI_COMPONENTS.activateSlimSelect({
                      store: INSTANCES,
                      key: "FILTER",
                      element: multipleSelect,
                      field,

                      eventActions: {
                        afterChange: (options) => {
                          let selectedValues = [];
                          Object.values(options).forEach((option) => {
                            const id = option.id;
                            const element = document.getElementById(id);
                            selectedValues.push(option.value);
                          });
                          // action(field, selectedValues, element.id);
                          HANDLERS.handleFilterMultipleSelect(
                            field,
                            selectedValues
                          );
                        },
                      },
                    });
                  }
                }
              });

              filterSidebar.innerHTML = "";
              filterSidebar.appendChild(content);

              break;
            case LABELS.ORDER_SUMMARY:
              elements = FILTER_SIDEBAR.generateOrderContent(fields);
              elements = UI_COMPONENTS.applyFormLayout("", elements);
              elements.forEach((element) => {
                if (element !== null) {
                  content.appendChild(element);
                  const multipleSelect = element.querySelector(
                    '[role="multiple-select"]'
                  );
                  if (multipleSelect) {
                    const field = multipleSelect.dataset.field || " ";
                    UI_COMPONENTS.activateSlimSelect({
                      store: INSTANCES,
                      key: "FILTER",
                      element: multipleSelect,
                      eventActions: {
                        afterChange: (options) => {
                          let selectedValues = [];
                          Object.values(options).forEach((option) => {
                            const id = option.id;
                            const element = document.getElementById(id);
                            selectedValues.push(option.value);
                          });
                          // action(field, selectedValues, element.id);
                          HANDLERS.handleFilterMultipleSelect(
                            field,
                            selectedValues
                          );
                        },
                      },
                    });
                  }
                }
              });

              filterSidebar.innerHTML = "";
              filterSidebar.appendChild(content);
              fields.forEach((field) => {
                if (field === LABELS.QUANTITY) {
                  let ids = getFilterFieldIds(activeTable, field);
                  setDefaultDropdownItem(field, ids.DROPDOWN_BUTTON_ID);
                  FILTER_SIDEBAR.attachListenerToDropdownInput(
                    ids.DROPDOWN_BUTTON_ID,
                    ids.DROPDOWN_ID,
                    ids.INPUT_ID
                  );
                }
              });
              break;
            case LABELS.PRODUCTION:
              elements = FILTER_SIDEBAR.generateProductionContent(fields);
              elements = UI_COMPONENTS.applyFormLayout("", elements);
              elements.forEach((element) => {
                if (element !== null) {
                  content.appendChild(element);
                  const multipleSelect = element.querySelector(
                    '[role="multiple-select"]'
                  );
                  if (multipleSelect) {
                    const field = multipleSelect.dataset.field || " ";
                    UI_COMPONENTS.activateSlimSelect({
                      store: INSTANCES,
                      key: "FILTER",
                      element: multipleSelect,
                      field,

                      eventActions: {
                        afterChange: (options) => {
                          let selectedValues = [];
                          Object.values(options).forEach((option) => {
                            const id = option.id;
                            const element = document.getElementById(id);
                            selectedValues.push(option.value);
                          });
                          // action(field, selectedValues, element.id);
                          HANDLERS.handleFilterMultipleSelect(
                            field,
                            selectedValues
                          );
                        },
                      },
                    });
                  }
                }
              });

              filterSidebar.innerHTML = "";
              filterSidebar.appendChild(content);

              fields.forEach((field) => {
                if (
                  field === LABELS.PRODUCT ||
                  field === LABELS.FINISHED_PRODUCT ||
                  field === LABELS.DELIVERED
                ) {
                  let ids = getFilterFieldIds(activeTable, field);
                  console.log(ids);
                  setDefaultDropdownItem(field, ids.DROPDOWN_BUTTON_ID);
                  FILTER_SIDEBAR.attachListenerToDropdownInput(
                    ids.DROPDOWN_BUTTON_ID,
                    ids.DROPDOWN_ID,
                    ids.INPUT_ID
                  );
                }
              });
              break;
            default:
              break;
          }

          // fields.forEach((field) => {
          //   const element = FILTER_SIDEBAR.generateElements(field, activeTable);
          //   const content = document.createElement("div");
          //   if (element) {
          //     content.appendChild(element);
          //   }
          //   content.classList.add("grow", "shrink", "pb-4");

          //   filterSidebar.appendChild(content);

          //   UI_COMPONENTS.activateSlimSelect({
          //     store: INSTANCES.FILTER,
          //     element: element,
          //     field,
          //     customSettings: {
          //       closeOnSelect: false,
          //       allowDeselect: true,
          //       maxValuesShown: 1,
          //       maxValuesMessage: "Đã chọn {number}",
          //       placeholderText: "",
          //     },
          //     eventActions: {
          //       afterChange: (options) => {
          //         let selectedValues = [];
          //         Object.values(options).forEach((option) => {
          //           const id = option.id;
          //           const element = document.getElementById(id);
          //           selectedValues.push(option.value);
          //         });
          //         // action(field, selectedValues, element.id);
          //         HANDLERS.handleFilterMultipleSelect(field, selectedValues);
          //       },
          //     },
          //   });

          //   if (
          //     (field === LABELS.PRODUCT ||
          //       field === LABELS.FINISHED_PRODUCT ||
          //       field === LABELS.DELIVERED) &&
          //     activeTable === LABELS.PRODUCTION
          //   ) {
          //     let ids = getFilterFieldIds(activeTable, field);
          //     setDefaultDropdownItem(field, ids.DROPDOWN_BUTTON_ID);
          //     FILTER_SIDEBAR.attachListenerToDropdownInput(
          //       ids.DROPDOWN_BUTTON_ID,
          //       ids.DROPDOWN_ID,
          //       ids.INPUT_ID
          //     );
          //   }
          // });
        },

        clearIdField: (table, field) => {
          if (table === LABELS.PRODUCTION) {
            let fieldObj =
              ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS[table][`${LABELS.ID}`];

            let element = document.getElementById(`${fieldObj.ID}`);
            element.value = "";
          }
        },

        clearNameField: (table, field) => {
          if (table === LABELS.PRODUCTION) {
            if (INSTANCES.FILTER[table] && INSTANCES.FILTER[table][field]) {
              INSTANCES.FILTER[table][field].setSelected("", false);
            } else {
              console.error("Unable to clear the field.");
            }
          }
        },

        clearProductField: (table, field) => {
          if (table === LABELS.PRODUCTION) {
            const fields = ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS;
            if (fields[field] && fields[field].INPUT_ID) {
              let id = fields[field].INPUT_ID;
              let element = document.getElementById(`${id}`);
              element.value = "";
            }
          }
        },

        clearFinishedProductField: (table, field) => {
          if (table === LABELS.PRODUCTION) {
            const fields = ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS;
            if (fields[field] && fields[field].INPUT_ID) {
              let id = fields[field].INPUT_ID;
              let element = document.getElementById(`${id}`);
              element.value = "";
            }
          }
        },

        clearDeliveredField: (table, field) => {
          if (table === LABELS.PRODUCTION) {
            const fields = ELEMENT_IDS.SIDE_BAR.FILTER.CONTENT.FIELDS;
            if (fields[field] && fields[field].INPUT_ID) {
              let id = fields[field].INPUT_ID;
              let element = document.getElementById(`${id}`);
              element.value = "";
            }
          }
        },

        clearStatusField: (table, field) => {
          if (table === LABELS.PRODUCTION) {
            if (INSTANCES.FILTER[table] && INSTANCES.FILTER[table][field]) {
              INSTANCES.FILTER[table][field].setSelected("", false);
            }
          }
        },

        clearFilterDataOnUI: (table, field, id) => {
          // let element = document.getElementById(id);
          switch (field) {
            case LABELS.ID:
              FILTER_SIDEBAR.clearIdField(table, field);
              break;
            case LABELS.NAME:
              FILTER_SIDEBAR.clearNameField(table, field);
              break;
            case LABELS.PRODUCT:
              FILTER_SIDEBAR.clearProductField(table, field);
              break;
            case LABELS.FINISHED_PRODUCT:
              FILTER_SIDEBAR.clearFinishedProductField(table, field);
              break;
            case LABELS.DELIVERED:
              FILTER_SIDEBAR.clearDeliveredField(table, field);
              break;
            case LABELS.STATUS:
              FILTER_SIDEBAR.clearStatusField(table, field);
              break;
            default:
              break;
          }
        },

        clearFilterDataOnStorage: (table) => {
          STORAGE.clearFilterFieldsByTable(table);
        },

        clearFilter: () => {
          const activeTable = STORAGE.getActiveTable();
          const fields = STORAGE.getFilterFieldsByTable(activeTable);

          Object.values(fields).forEach((field) => {
            FILTER_SIDEBAR.clearFilterDataOnUI(activeTable, field.name);
          });

          FILTER_SIDEBAR.clearFilterDataOnStorage(activeTable);
        },
      };

      const pageSize = 10;
      let table, currentMultipleSelect;
      let currentRow = null;
      let customTable;

      document.addEventListener("DOMContentLoaded", () => {
        customTable = new CustomTable();
        document.querySelector("[role='tab']").click();
        const clearFilterButton = document.getElementById(
          "clear-filter-button"
        );
        clearFilterButton.addEventListener("click", (e) => {
          FILTER_SIDEBAR.clearFilter();
        });
        observeMutations();
        // FLOWBITE_MODAL.activate();
        SERVICES.fetchNecessityData();
        LISTENERS.attachEventListener();
      });

      window.addEventListener("click", (e) => {
        const clickedOverlay = e.target.closest(
          `#${ELEMENT_IDS.MODAL.OVERLAY.ID}`
        );
        // const spreadsheetInfo = ELEMENT_IDS.MODAL.saveId(LABELS.DATABASE);
        // const clickedSpreadsheet = e.target.closest(`#${spreadsheetInfo.id}`);
        // const activeCellInSpreadsheet = STORAGE.getActiveCell();
        // const activeCellId = activeCellInSpreadsheet.id;
        // const clickedCell = e.target;
        // const input = clickedCell.querySelector("input");

        // if (clickedSpreadsheet && clickedCell.id !== activeCellId) {
        //   // clickedCell.classList.add("border-l-0");
        //   input.setAttribute("readonly", true);
        // }
        if (clickedOverlay) {
          FLOWBITE_MODAL.closeModal();
        }
      });

      // window.addEventListener("unload", (e) => {
      //   console.log("The page is unloading.");
      //   STORAGE.resetEditedRow()
      //   STORAGE.resetNewItem();
      //   STORAGE.setFilterState(false);
      //   STORAGE.setSpreadsheetMode(LABELS.NAVIGATING);
      //   FILTER_SIDEBAR.clearFilter();
      // });
    </script> -->
  </body>
</html>
